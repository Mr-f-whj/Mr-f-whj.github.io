<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>计算机系统工程复习 | Kaleidoscopeのblog</title><meta name="author" content="Kaleidoscope"><meta name="copyright" content="Kaleidoscope"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="此篇文章仅作为计算机系统工程浅薄复习之用">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机系统工程复习">
<meta property="og:url" content="https://mr-f-whj.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/">
<meta property="og:site_name" content="Kaleidoscopeのblog">
<meta property="og:description" content="此篇文章仅作为计算机系统工程浅薄复习之用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mr-f-whj.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2023-06-20T14:47:40.000Z">
<meta property="article:modified_time" content="2023-08-03T15:51:13.063Z">
<meta property="article:author" content="Kaleidoscope">
<meta property="article:tag" content="计算机系统工程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mr-f-whj.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://mr-f-whj.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机系统工程复习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-03 23:51:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/article.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('/img/bg.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Kaleidoscopeのblog"><span class="site-name">Kaleidoscopeのblog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机系统工程复习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-20T14:47:40.000Z" title="发表于 2023-06-20 22:47:40">2023-06-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-03T15:51:13.063Z" title="更新于 2023-08-03 23:51:13">2023-08-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/">计算机系统工程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机系统工程复习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><br>

<blockquote>
<p><strong>介绍</strong></p>
<p>本课程假定学生没时间在本科期间把系统设计的4大主题OS&#x2F;Network&#x2F;DistributedSys&#x2F;Security都详细学一遍，于是来一个大杂烩把这它们都讲一讲，保证学生毕业后对系统设计至少有初步认识。另外这门课据说也是“少有的”概述了系统设计中广泛运用的思想。</p>
</blockquote>
<p>[TOC]</p>
<h2 id="Lec-01-概述"><a href="#Lec-01-概述" class="headerlink" title="Lec 01 概述"></a>Lec 01 概述</h2><h3 id="0-介绍"><a href="#0-介绍" class="headerlink" title="0.介绍"></a>0.介绍</h3><blockquote>
<p>1.以整体观&#x2F;系统观看问题</p>
<p>2..东西不是越完美越好</p>
</blockquote>
<h4 id="1-位置和意义"><a href="#1-位置和意义" class="headerlink" title="1.位置和意义"></a>1.位置和意义</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230620231725466.png" alt="image-20230620231725466" style="zoom:80%;">

<h4 id="2-收获"><a href="#2-收获" class="headerlink" title="2.收获"></a>2.收获</h4><ol>
<li><p>进⾏思维训练</p>
<ul>
<li>冲突下的设计</li>
</ul>
</li>
<li><p>学习经验法则</p>
</li>
</ol>
<ul>
<li><p>system design principles &amp; hints（系统设计原则和提示）</p>
<ul>
<li>前⼈智慧和坑，不是真理但价值连城</li>
</ul>
</li>
<li><p>经验法则就像设计目标⼀样，存在冲突</p>
<ul>
<li><p>例：[<strong>防⽌过度通用法则</strong>]</p>
<p>“If it is good for everything, it’s good for nothing”—-<strong>东西不是越完美越好</strong></p>
<p> 通用不对吗？什么是过度？什么情况下适用？</p>
</li>
</ul>
</li>
</ul>
<h4 id="3-系统"><a href="#3-系统" class="headerlink" title="3.系统"></a>3.系统</h4><ul>
<li><p>系统</p>
<ul>
<li><p><strong>将组件组织成整体，使其具备某些属性</strong></p>
<ul>
<li>计算机系统：将”用于计算的物理部件”和”描述计算的语⾔结构”组成整体，使其具备某些功能和性质</li>
</ul>
<blockquote>
<h5 id="作为系统的属性-x2F-挑战"><a href="#作为系统的属性-x2F-挑战" class="headerlink" title="作为系统的属性&#x2F;挑战"></a>作为系统的属性&#x2F;挑战</h5><ul>
<li><p>计算机应用的很多需求和性质是通过整体来体现的</p>
<ul>
<li>并发</li>
<li>分布、互联</li>
<li>容错、防范攻击</li>
<li>⼤量数据、⼤量用户</li>
</ul>
</li>
<li><p>计算机系统作为系统存在很多挑战</p>
<ul>
<li>涌现性、影响传播、不成比例规模效应、取舍</li>
</ul>
</li>
<li><p>系统属性与挑战，需要把系统作为⼀个整体看待</p>
</li>
</ul>
</blockquote>
</li>
<li><p><strong>整体性的思维⽅式</strong></p>
<ul>
<li><p>&#x3D;&#x3D;系统观&#x3D;&#x3D;</p>
<blockquote>
<h5 id="以系统观的视角学习"><a href="#以系统观的视角学习" class="headerlink" title="以系统观的视角学习"></a>以系统观的视角学习</h5><ul>
<li><p><strong>将系统作为⼀个（研究）整体，⽽非仅关注单⼀部件</strong></p>
<ul>
<li>为什么需要作为⼀个整体看待？整体与组件有什么不⼀样的性质&#x2F;挑战？（↯）</li>
</ul>
<p>这不是⽞学</p>
<ul>
<li>作为整体看待时，与其他学科有什么不同？（↯↯）</li>
</ul>
</li>
</ul>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-系统与复杂性"><a href="#1-系统与复杂性" class="headerlink" title="1.系统与复杂性"></a>1.系统与复杂性</h3><h4 id="1-系统的共性问题"><a href="#1-系统的共性问题" class="headerlink" title="1..系统的共性问题"></a>1..系统的共性问题</h4><ol>
<li><p><strong>涌现性</strong>（emergent properties）</p>
<ul>
<li><p>⽣命是物理化学作用下的涌现性</p>
</li>
<li><p>Some things turn up only when a system is built.</p>
</li>
</ul>
</li>
<li><p><strong>影响传播</strong>（propagation of effects）</p>
<ul>
<li>例⼦</li>
</ul>
<blockquote>
<p>- 蝴蝶效应</p>
<p>- 汽车：提升舒适感→轮⼦增⼤→增⼤备胎空间→增⼤</p>
<p>后备箱→座椅前移 或 减薄靠背→降低舒适感 ？？</p>
<p> 进⼀步：动⼒系统与承载系统调整？维修配件？</p>
</blockquote>
<ul>
<li>结论：There are no small changes in a large system <strong>⼤系统没有小修</strong></li>
</ul>
</li>
<li><p><strong>不成比例规模效应</strong>（incommensurate scaling）</p>
<ul>
<li><p><strong>当系统规模(或速度)增⼤时，某些部件有不同法则，导致系统失败。</strong></p>
</li>
<li><p>例⼦：</p>
<blockquote>
<p>- 将老鼠按比例扩⼤到⼤象的尺⼨，会被自身压垮</p>
<p>​	‣ 重量是尺⼨的三次⽅，骨强度（基于横截面）是尺⼨</p>
<p>的平⽅</p>
<p>- 增加油轮的长度，存在上限使：目视距离&lt;刹车距离</p>
<p>​	‣ 体积增长是长度增长的三次⽅，推⼒增⼤⼆次⽅，刹</p>
<p>车距离增加长度相同倍数，视野增长1.414倍。</p>
</blockquote>
</li>
</ul>
</li>
<li><p><strong>取舍</strong>（trade-off）</p>
<ul>
<li><p>按下葫芦浮起瓢 —— <strong>有得必有失，无法十全十美</strong></p>
</li>
<li><p>例⼦</p>
<blockquote>
<p>- 加快电路时钟→能耗增加、计时错误增加</p>
<p>​	 同时缩小尺⼨→散热困难</p>
<p>- ⼆分分类问题：</p>
<p>​	 ⽆法直接测量，⽽选择替代物（proxy）</p>
<p>漏报率 vs. 误报率，查准率 vs. 召回率</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h4 id="2-系统组成"><a href="#2-系统组成" class="headerlink" title="2. 系统组成"></a>2. 系统组成</h4><ul>
<li><p><strong>系统（system）</strong></p>
<ul>
<li>⼀组互相连接的组件，能够通过与环境的接⼝，做出期望的⾏为</li>
</ul>
</li>
<li><p><strong>环境（environment，universe）</strong></p>
<ul>
<li>系统之外的事物</li>
</ul>
</li>
<li><p><strong>接⼝（interface）</strong></p>
<ul>
<li>与环境的交互</li>
</ul>
</li>
<li><p><strong>组件（component）</strong></p>
<ul>
<li>组成系统的部分</li>
<li>分析：不同目的或粒度</li>
</ul>
</li>
</ul>
<h4 id="3-复杂性"><a href="#3-复杂性" class="headerlink" title="3.复杂性"></a>3.复杂性</h4><ul>
<li><p>复杂 &#x3D; 难以理解</p>
</li>
<li><p>标志</p>
<p>- <strong>组件多</strong></p>
<p>- <strong>交互多</strong></p>
<p>- <strong>不规则</strong>（exceptions complicate understanding）</p>
<p>- <strong>描述长</strong>（Kolmogorov complexity，描述复杂度）</p>
<p>- <strong>⼈⼿多</strong></p>
<p>• 有时候复杂性(认为其复杂)是因为⽆知</p>
<p>• abstraction（<strong>抽象</strong>）<strong>是应对复杂性的好⼯具</strong></p>
</li>
</ul>
<h4 id="4-什么导致了复杂性？"><a href="#4-什么导致了复杂性？" class="headerlink" title="4.什么导致了复杂性？"></a>4.什么导致了复杂性？</h4><ul>
<li><strong>多功能：需求的数量</strong></li>
</ul>
<p>​	  - 例⼦：可以⾏驶、飞⾏、潜⽔的汽车</p>
<p>​	  - [复杂性提升原理]增加需求与复杂性提升不成比例</p>
<p>​	  - [避免过度通用原则]Good for everything&#x3D;good for nothing</p>
<p>​	  - 变化和适应变化，增加复杂性</p>
<ul>
<li><strong>⾼性能：⾼利用率</strong></li>
</ul>
<p>​	  - 例⼦：提⾼单线铁路的双向吞吐率</p>
<p>​	  - [收益率递减法则]The more one improves some measure of goodness, the more effort the next improvement will require.(<strong>一个人在某种程度上提高得越多，下一步的提高就需要付出更多的努力。</strong>)</p>
<h3 id="2-应对复杂性"><a href="#2-应对复杂性" class="headerlink" title="2. 应对复杂性"></a>2. 应对复杂性</h3><p>应对复杂性的通用<strong>⽅法</strong>：&#x3D;&#x3D;模块化、抽象（设计技术）分层、层级&#x3D;&#x3D;</p>
<h4 id="1-模块化-分成几个小部分-——分而治之"><a href="#1-模块化-分成几个小部分-——分而治之" class="headerlink" title="1.模块化(分成几个小部分)——分而治之"></a>1.模块化(分成几个小部分)——分而治之</h4><ul>
<li><p><strong>将系统分为互相交互的⼦系统-模块</strong>（module）</p>
</li>
<li><p>收益：分别考虑各个模块内交互，及模块间交互</p>
<ul>
<li><p>例⼦：</p>
<blockquote>
<p>N条语句的程序</p>
<p>​	- Bug数 ~ N</p>
<p>​	- 调试时间 ~ N × Bug数</p>
<pre><code>                 ~ N²
</code></pre>
<p>如果分为K个模块，则：</p>
<p>​	调试时间 ~ (N&#x2F;K)² × K</p>
<pre><code>              ~ N²/K
</code></pre>
</blockquote>
</li>
</ul>
</li>
</ul>
<h4 id="2-抽象——隐藏细节（？简化其实现过程，用名称等概括它功能？）"><a href="#2-抽象——隐藏细节（？简化其实现过程，用名称等概括它功能？）" class="headerlink" title="2.抽象——隐藏细节（？简化其实现过程，用名称等概括它功能？）"></a>2.抽象——隐藏细节（？简化其实现过程，用名称等概括它功能？）</h4><ul>
<li><p>以Bug Finding为例，由于影响传播，模块化⽅法不⾜以使bug限定在模块内</p>
</li>
<li><p><strong>如何控制影响传播？</strong></p>
</li>
</ul>
<p>​	- <strong>更少交互，更少传播</strong>→接⼝与内部的相互独立、spec与 impl的相互独立→抽象（信息技术）</p>
<ul>
<li>模块化⼏乎总是伴随抽象，模块化经常包含抽象含义</li>
</ul>
<p>  <strong>功能模块化 ＝ 模块化+抽象</strong></p>
<ul>
<li>例</li>
</ul>
<p>​	  - 电⼦机械用品</p>
<ul>
<li><p><strong>已见过的模块化与抽象</strong></p>
<blockquote>
<p>• 模块化</p>
<p>​	- 结构化：代码组合→自定义操作</p>
<p>​	- OOP：数据组合→自定义类型</p>
<p>• 抽象</p>
<p>​	- 函数的名与形参</p>
<p>​	- 类的名与接⼝</p>
<p>​	- 模板：类型的类型</p>
</blockquote>
</li>
<li><p><strong>计算机中的常见抽象</strong></p>
<blockquote>
<p>•（可保存状态的时序逻辑电路） → 寄存器</p>
<p>​	- 通过命名</p>
<p>• 程序</p>
<p>​	- <strong>函数</strong>：形参与返回值</p>
<p>​	- <strong>类</strong>：可以访问的成员</p>
<p>• 系统</p>
<p>​	- <strong>操作系统</strong>：系统调用</p>
<p>​	- <strong>⽹络协议</strong>：服务原语</p>
</blockquote>
</li>
</ul>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230622110331818.png" alt="image-20230622110331818" style="zoom: 67%;">

<h4 id="3-分层"><a href="#3-分层" class="headerlink" title="3.分层"></a>3.分层</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230622110845751.png" alt="image-20230622110845751" style="zoom:80%;">

<ul>
<li><p><strong>可以看做模块化的⼀种减少交互的特例</strong></p>
<p>- ⽅法：</p>
<p>​	<strong>‣ 低层的模块是完备的，低层模块构成⾼层模块</strong></p>
<p>​	<strong>‣ 每⼀层可以划分模块，但模块只跟本层和上下层交互</strong></p>
<p>- 收益：相比模块化的O(N²)交互，分层的交互是O(N)或O(NlogN)</p>
</li>
<li><p>例：</p>
<blockquote>
<p>- 语⾔解释器，越⾼层越接近⼈</p>
<p>- 计算机系统：门与存储单元 - 处理器与内存 - 操作系统（增强</p>
<p>（友好性）的计算机） - 应用程序 - …</p>
<p>- 数据通信⽹络 </p>
<p>- <strong>代数：整数 - 有理数 - 复数 - 多项式 - …</strong></p>
</blockquote>
</li>
</ul>
<h4 id="4-层级（类似树-x2F-森林）"><a href="#4-层级（类似树-x2F-森林）" class="headerlink" title="4.层级（类似树&#x2F;森林）"></a>4.层级（类似树&#x2F;森林）</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230622110918154.png" alt="image-20230622110918154" style="zoom:80%;">

<ul>
<li><p><strong>模块化中的减少交互的特例，也是模块化的现实幸存状态</strong></p>
<p>- ⽅法：</p>
<p>​	<strong>‣ 小模块包在⼤模块内部，以此例推</strong></p>
<p>​	<strong>‣ 形成树形结构，可退化为分层</strong></p>
<p>- 收益：</p>
<p>​	‣ 交互是O(N)或O(NlogN)</p>
<p>​	‣ <strong>⼦模块设计者⽆需担⼼系统增⼤</strong></p>
</li>
<li><p>例</p>
<p>- <strong>社会系统、⽣物&#x2F;物理系统、符号系统</strong></p>
<p>- 司马贺在“The architecture of complexity”中的例⼦：层级结构更易于在进化中幸存，系统增⼤时交互线性增加</p>
</li>
</ul>
<h4 id="5-命名"><a href="#5-命名" class="headerlink" title="5.命名"></a>5.命名</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230622111259554.png" alt="image-20230622111259554"></p>
<ul>
<li><p>命名 → 间接</p>
</li>
<li><p><strong>命名是间接和共享的前提，是模块化的基⽯</strong></p>
</li>
<li><p>[用间接解耦模块]间接支持可替换性</p>
<p>- <strong>计算机系统中的任何问题都可以通过增加一个间接层来解决</strong>。——大卫·惠勒 </p>
<p>​	‣ 更有趣的观察：移除⼀层间接通常可以提升性能</p>
</li>
</ul>
<h3 id="3-计算机系统的特殊性"><a href="#3-计算机系统的特殊性" class="headerlink" title="3.计算机系统的特殊性"></a>3.计算机系统的特殊性</h3><ol>
<li><h4 id="计算机系统的特殊性"><a href="#计算机系统的特殊性" class="headerlink" title="计算机系统的特殊性"></a>计算机系统的特殊性</h4><p>- 对比建筑、⽣物⼯程、卫星通信、国家治理…，有相似性，也有特殊性：</p>
<ol>
<li><p><strong>（系统扩张没有上限）⽆限：计算机系统的复杂性不受物理法则限制</strong></p>
<ul>
<li><p><strong>当模拟部件组合时，噪声积累，直到成为⾏为的主导因素</strong></p>
</li>
<li><p>软件</p>
<p>- 比硬件更加不受物理法则约束</p>
<p>- 只受：内存、处理器的限制</p>
<p>​	‣ Linux内核代码⾏数是多少？chromium呢？</p>
<p>- abstraction降低复杂度，但leakiness（泄露）累积复杂度</p>
</li>
<li><p><strong>结论：计算机系统扩张的首要界限是设计者的理解能⼒</strong></p>
<p>- 但不自量⼒在计算机世界的客户、管理者等比比皆是（⽆知就是⼒量？）</p>
<p>- <strong>自我约束是系统设计者的良好品质</strong></p>
</li>
</ul>
</li>
<li><p><strong>（d(tech)&#x2F;dt是空前的）空前：计算机系统技术的变化率是没有先例的</strong></p>
<ul>
<li><p><strong>技术迅速发展</strong></p>
<p>- 硬件组件平均两年成本减半，硬件性能迅速(不均衡)增长</p>
<p>- →不断、迅速改进⽅案</p>
<p>​	‣ [不成比例规模增长法则]参数变化10倍，系统需要重新设计</p>
<p>- 预测往往不够准确，预测增加复杂度</p>
<p>​	‣ 设计过程中系统⽅案也会⼤幅度改进</p>
<p>- 不断改进，积累了错误和复杂度</p>
<p>​	‣ 暴⼒⽅案（更多投⼊，等待硬件更新，简单算法）更容易被采纳</p>
<p>- 可用性（⼈机⼯程），跟随硬件等技术迅速发展</p>
<p>- 新技术的普及更加迅速，应用和系统需要跟随</p>
</li>
<li><p><strong>结论：计算机系统的设计包含了telescoping（可伸缩）</strong></p>
</li>
</ul>
</li>
</ol>
</li>
</ol>
<h4 id="2-如何应对"><a href="#2-如何应对" class="headerlink" title="2.如何应对"></a>2.如何应对</h4><ul>
<li><p>需要更多设计原则</p>
</li>
<li><p>为什么已有的四种⽅案不够？</p>
<p>- 已有的⽅案是基础</p>
<p>- 但是，在复杂巨⼤、迅速变化的计算机系统中，如何选择最恰当的模块化、抽象、分层和层级呢？</p>
</li>
<li><p><strong>更多设计原则</strong></p>
<p><strong>- 1）迭代设计</strong></p>
</li>
</ul>
<blockquote>
<p>• 迭代：首先建立简单、可运⾏的系统，满⾜需求的某个⼦集，然后小步演化，逐步满⾜全部需求</p>
<p>​	- 可运⾏：支持开发、积累经验、验证技术、发现问题</p>
<p>​	- 小步：减少风险</p>
<p>​	- 逐步：技术更新、需求变化很容易在迭代中加⼊系统</p>
<p><strong>• [迭代设计原则]既然不能⼀次成功，就使它易于修改</strong></p>
</blockquote>
<p>​	 - 迭代的障碍</p>
<blockquote>
<p>• 失去概念完整性</p>
<p>​	- 应对：始终强调最终设计目标和基本设计原理</p>
<p>• 坏消息跑的慢(公司，bad-news diode)</p>
<p>​	- 应对：激励</p>
<p>• 模块化错误难以修复</p>
<p>​	- [⽆沉降地基法则]：修改模块化难度⼤</p>
<p>​	- 阻⼒：修改模块化使模块开发者⽓馁</p>
<p>• [second-system effect]</p>
<p>​	- 成功的系统使开发者过分自信，勇于开发怪兽系统</p>
<p>• 总结：主要是软件⼯程管理学问题和认知偏差</p>
</blockquote>
<p>  <strong>- 2）KIS</strong></p>
<blockquote>
<p><strong>• [不断挖掘原则]复杂系统失败于复杂的原因</strong></p>
<p>⼀个错误可以在系统中隐藏数年，要找出其中的原因，吸取教训</p>
<p>​	- 为什么这个错误难以发现？</p>
<p>​	- 为什么设计师会犯这个错？</p>
<p>​	- <strong>不要忽视难以解释的⾏为，即使它自⾏消失</strong></p>
<p>​		‣ 例：race condition</p>
</blockquote>
<p>​	 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230622114027454.png" alt="image-20230622114027454"></p>
<h2 id="Lec02-抽象计算机系统"><a href="#Lec02-抽象计算机系统" class="headerlink" title="Lec02 抽象计算机系统"></a>Lec02 抽象计算机系统</h2><ul>
<li>实例：UNIX⽂件系统的分层抽象构造</li>
</ul>
<h3 id="1、三个基本抽象"><a href="#1、三个基本抽象" class="headerlink" title="1、三个基本抽象"></a>1、三个基本抽象</h3><ul>
<li><p><strong>抽象：用𝑨表示𝑩。（隐藏细节(将其内部细节或功能用某个词代替)，规定交互）</strong></p>
</li>
<li><p>𝑩：计算机中最常见的抽象对象</p>
<p>- 例：&#x3D;&#x3D;存储 解释器 通信链路！&#x3D;&#x3D;</p>
<p>​	‣ 3个衡量计算复杂度的指标：空间、时间、消息</p>
<p>​	‣ 3个基本计算功能：记忆、处理、通信（存、算、传）</p>
<p>​	‣ 3类数字电路基本组织⽅式：存储电路、运算电路、连接</p>
<p>- 3个抽象普遍适用，语义清晰：沿用到不同分层&#x2F;应用</p>
</li>
<li><p>如何分析一个抽象</p>
<blockquote>
<ol>
<li><strong>A 抽象了什么？</strong></li>
<li><strong>B 抽象成什么？</strong><ul>
<li>命名⽅案</li>
</ul>
</li>
</ol>
<ol start="3">
<li><p><strong>有哪些功能和性质？</strong></p>
<ul>
<li><p>操作&#x2F;接⼝？</p>
</li>
<li><p>保有的性质？</p>
</li>
<li><p>有哪些指标？</p>
</li>
<li><p>（多&#x2F;少了什么？）</p>
</li>
</ul>
</li>
</ol>
</blockquote>
</li>
</ul>
<h4 id="1、存储器"><a href="#1、存储器" class="headerlink" title="1、存储器"></a>1、存储器</h4><ul>
<li><p>存储</p>
<p>- 𝑨：基本存储设备：（#？举例）‣ volatile vs. non-volatile</p>
<p>- 𝑩：⾼层存储系统：RAID、FS、DB、页</p>
<p>- 保持的基本操作——读写数据</p>
<p>​	‣ write(name, value)</p>
<p>​	‣ value ← read(name)</p>
</li>
</ul>
<p>1、存储的两个重要性质⁺ᵗ</p>
<p>  - <strong>读写⼀致性</strong>(R&#x2F;W Coherence)</p>
<p>  ​	‣ R&#x2F;W Coherence<em>：*<em>读的结果&#x3D;最近⼀次写</em></em></p>
<p>  - <strong>原⼦性</strong>(atomicity)</p>
<p>  ​	‣ Before-or-after Atomicity<em>：*<em>读写序列＝遵循时序</em></em></p>
<ul>
<li><p><strong>会影响以上性质的操作</strong>：</p>
<ol>
<li><p><strong>并发</strong>：两个操作主体⼏乎同时读写，时序不确定。对于1个单元，危及属性1，对于多个单元，危及属性2</p>
<p>- 并发是问题的前提</p>
</li>
<li><p><strong>远程存储</strong>：可能会导致延迟和错误，强化了上⼀问题</p>
</li>
<li><p><strong>性能优化</strong>：优化编译&#x2F;⾼性能处理器的内存访问重排，继续强化上⼀问题</p>
<p>- 例：编译器延迟写⼊，使并发读写不⼀致。</p>
<p>- 应对优化：</p>
<p>  - Java：synchronized声明：保证⼀个代码块的读写⼀致性</p>
<p>  - HP Alpha处理器：memory barrier指令：强制之前操作完成</p>
<p>  - 以上⽅案依赖编程，增加复杂度和出错可能</p>
</li>
<li><p><strong>存储单元＜值的长度：读写需多次操作。是上⼀问题的典型例⼦（原⼦性）</strong></p>
<p>‣ 例：⼤数，并发只读到⼀半新数据：write-tearing</p>
<p>‣ 如果读写中间发⽣(断电等)故障，则强化上⼀问题</p>
<p>‣ <strong>应对</strong></p>
<p>​	<strong>- 读写操作的协商机制（原⼦性）</strong></p>
<p>​	<strong>- 故障发⽣时保证未完成的操作可回退（all-or-nothing）</strong></p>
</li>
<li><p><strong>分布式：多副本存储可能不⼀致</strong></p>
<p>‣ 副本存储用于提⾼可靠性、性能（分布式存储）</p>
<p>‣ 使⼀致性和原⼦性变得愈加困难</p>
<p>‣ 应对机制，见</p>
<p>​	- “容错与可靠性”</p>
<p>​	- “原⼦性与⼀致性”</p>
</li>
</ol>
</li>
</ul>
<p>2、指标</p>
<ul>
<li>存储时延：读写需要的时间</li>
</ul>
<h4 id="2、解释器"><a href="#2、解释器" class="headerlink" title="2、解释器"></a>2、解释器</h4><ul>
<li><p>定义：执⾏组成计算的动作的活动部件</p>
<p>- 例：<strong>CPU(中央处理器)、硬件控制器、OS、Java字节码、FireFox…</strong></p>
</li>
<li><p>抽象：可抽象为3个部件</p>
<p>- <strong>指令引用</strong>：如何找到下⼀个指令</p>
<p>- <strong>指令集</strong>：指令对应的⾏动</p>
<p>- <strong>环境引用</strong>：如何找到环境（执⾏操作的当前状态）</p>
</li>
<li><p>模式：⼀般采用遵循程序顺序执⾏的模式</p>
</li>
<li><p><strong>多(异步)解释器是⼀致性和原⼦性问题的主要因素</strong></p>
</li>
</ul>
<p>1、处理器	</p>
<ul>
<li><strong>通用处理器是解释器的实现之⼀</strong><ul>
<li>指令引用 &#x3D; Program Counter寄存器 </li>
<li>环境引用 &#x3D;寄存器</li>
<li>指令集&#x3D;op-code：算术运算、比较、<br>  ‣ RISC：访问内存使用load和store</li>
</ul>
<p>	</p>
</li>
<li>专用处理器：如时钟芯片</li>
</ul>
<p>2、解释器分层</p>
<ul>
<li><p><strong>解释器通常以分层⽅式组织</strong></p>
<ul>
<li>低层：基本指令集</li>
<li>⾼层：丰富或专用</li>
</ul>
</li>
<li><p>基本要求</p>
<p>下层解释器解释指令具原⼦性，即使有故障也不能half-finished只完成一半（worse is better）</p>
</li>
</ul>
<h4 id="3、通信链路"><a href="#3、通信链路" class="headerlink" title="3、通信链路"></a>3、通信链路</h4><ul>
<li>定义：提供<strong>信息在物理分隔的组件间移动的途径</strong></li>
</ul>
<p>​		- 例：双绞线、光纤、以太⽹、USB、因特⽹、UNIX管道</p>
<ul>
<li>可抽象为基本操作(发送、接收)</li>
</ul>
<p>​		‣ send (link_name, outgoing_message_buffer) </p>
<p>​		‣ receive (link_name, incoming_message_buffer) </p>
<ul>
<li><p>为什么不抽象为存储操作？（下⼀页）</p>
<p><strong>• 通信相比存储的复杂性</strong></p>
<p>​	<strong>‣ 时间难以预测</strong></p>
<p>​	<strong>‣ 完整性难以保证</strong></p>
<p>• 通信的send&#x2F;receive语义与存储的write&#x2F;read语义不同</p>
</li>
</ul>
<h3 id="2、命名-？名称就像变量名，通过名称取引用被命名的内存空间-x2F-数据-！！！！"><a href="#2、命名-？名称就像变量名，通过名称取引用被命名的内存空间-x2F-数据-！！！！" class="headerlink" title="2、命名(？名称就像变量名，通过名称取引用被命名的内存空间&#x2F;数据)！！！！"></a>2、命名(？名称就像变量名，通过名称取引用被命名的内存空间&#x2F;数据)！！！！</h3><ul>
<li><p>名称：名称是外部观察者用于识别的术语。它们可以识别一类或一类事物，或单个事物，要么是唯一的，要么是在给定的上下文中。<strong>由名称标识的实体称为其引用对象。</strong></p>
</li>
<li><p>&#x3D;&#x3D;间接和抽象都使用或创造名称&#x3D;&#x3D;</p>
</li>
<li><p>命名（naming）即对名称的创建和使用</p>
</li>
<li><p>&#x3D;&#x3D;命名支持间接，从⽽可以延迟绑定&#x2F;实现，易于替换，支持共享。&#x3D;&#x3D;</p>
</li>
</ul>
<p><strong>从对象来看：!!!</strong></p>
<ul>
<li><p>对象：结构化或非结构化的数据或对象</p>
</li>
<li><p>从对象(模块)来看，命名带来什么？</p>
<p>​	<strong>- 模块使用命名，以引用、共享（否则就需要复制）</strong></p>
<p>​	<strong>- 命名带来间接（名→值的间接），</strong>收益：</p>
<p>​		‣ 延迟绑定（什么叫绑定？）</p>
<p>​		‣ 易于更换</p>
<p>• 抽象后创造的模块和操作都需要新的名称</p>
<p>• <strong>模块化+抽象，命名是粘合剂</strong></p>
</li>
</ul>
<h4 id="1-命名模型！！！！！"><a href="#1-命名模型！！！！！" class="headerlink" title="1. 命名模型！！！！！"></a>1. 命名模型！！！！！</h4><ul>
<li><p>命名⽅案3要素</p>
<p>- <strong>命名空间</strong></p>
<p>- <strong>名称映射算法</strong></p>
<p>​	<strong>‣ 绑定（bind）：建立关系</strong></p>
<p>​	<strong>‣ 解析（resolve）：用名找到值</strong></p>
<blockquote>
<p><strong>解析：（常用算法：表查找、递归查找、多重查找）</strong></p>
<ul>
<li><p>(运行)环境说明用哪个命名⽅案</p>
</li>
<li><p>上下⽂（context）用来找到具体的命名⽅案</p>
</li>
</ul>
</blockquote>
<p>- <strong>值域</strong>（universe of values）</p>
<p>​	‣ value：<strong>对象或另⼀个名称</strong></p>
</li>
</ul>
<h4 id="2-上下文引用（！！！）"><a href="#2-上下文引用（！！！）" class="headerlink" title="2.  上下文引用（！！！）"></a>2.  上下文引用（！！！）</h4><ul>
<li><p><strong>上下文</strong>：指的是一种环境。相对于进程而言，就是进程执行时的环境；具体来说就是各个变量和数据，包括所有的寄存器变量、进程打开的文件、内存信息等。</p>
<blockquote>
<p>看，一篇文章，给你摘录一段，没前没后，你读不懂，因为有语境，就是语言环境存在，一段话说了什么，要通过上下文(文章的上下文)来推断。</p>
<p>子程序之于程序，进程之于操作系统，甚至app的一屏之于app，都是一个道理。</p>
<p>程序执行了部分到达子程序，子程序要获得结果，要用到程序之前的一些结果(包括但不限于外部变量值，外部对象等等)；</p>
<p>app点击一个按钮进入一个新的界面，也要保存你是在哪个屏幕跳过来的等等信息，以便你点击返回的时候能正确跳回，如果不存肯定就无法正确跳回了。</p>
<p>看这些都是上下文的典型例子，理解成环境就可以，(而且上下文虽然叫上下文，但是程序里面一般都只有上文而已，只是叫的好听叫上下文。。进程中断在操作系统中是有上有下的，不过不给题主说了，免得产生新的问题)</p>
<p>作者：付鹏<br>链接：<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/26387327/answer/32618592">https://www.zhihu.com/question/26387327/answer/32618592</a></p>
</blockquote>
</li>
<li><p>context reference：用以找到context的变量名称</p>
</li>
</ul>
<h4 id="3-–"><a href="#3-–" class="headerlink" title="3. –"></a>3. –</h4><h5 id="3-1-路径名"><a href="#3-1-路径名" class="headerlink" title="3.1 路径名"></a>3.1 路径名</h5><ul>
<li><p><strong>路径名：显式包含了自⼰所用的上下⽂引用的名称</strong></p>
<p>- 在前：usr&#x2F;bin&#x2F;emacs 在后：security.ouc.edu.cn</p>
</li>
<li><p>递归名称解析</p>
<p>- 最低有效组件L之外的组件都是为L提供上下⽂</p>
<p>- 解析绝对路径：内置的根</p>
<p>- 解析相对路径：默认上下⽂</p>
<p>- <strong>区别绝对和相对的符号：“&#x2F;”、“.”</strong></p>
</li>
</ul>
<h5 id="3-2-命名网络-像一个文件可以从不同路径访问？有副本？"><a href="#3-2-命名网络-像一个文件可以从不同路径访问？有副本？" class="headerlink" title="3.2 命名网络(像一个文件可以从不同路径访问？有副本？)"></a>3.2 命名网络(像一个文件可以从不同路径访问？有副本？)</h5><ul>
<li><p>命名⽹络</p>
<p><strong>- 可以用不同的路径，获得名称的值</strong></p>
<p>​	‣ 产⽣别名（alias）</p>
<p><strong>- 例：⽂件系统</strong></p>
<p>- 限制复杂度，如：命名层次结构 &#x3D; 树</p>
<p>- 增加复杂度，如：任意的交叉链接</p>
</li>
</ul>
<h4 id="4、多重查找：透过分层上下⽂的搜索"><a href="#4、多重查找：透过分层上下⽂的搜索" class="headerlink" title="4、多重查找：透过分层上下⽂的搜索"></a>4、多重查找：透过分层上下⽂的搜索</h4><ul>
<li><p>多重查找→搜索</p>
<p>- 搜索路径（尝试 echo $PATH）</p>
<p>- 区别于搜索引擎和桌面搜索</p>
<p><strong>- 常用于编译器和加载器查找库函数（有其上下⽂列表）</strong></p>
</li>
<li><p><strong>不同层有不同的优先级</strong></p>
<p>- 例：变量名的查找顺序</p>
</li>
<li><p>名称的scope</p>
<p><strong>- 能将名称绑定到相同对象的那些层的范围</strong></p>
<p><strong>- 不依赖当前上下⽂的名称，称为全局名</strong></p>
<p>‣ 全局变量（#？局部变量在汇编中也是局部上下⽂？）</p>
</li>
</ul>
<h4 id="5、名称比较"><a href="#5、名称比较" class="headerlink" title="5、名称比较!????"></a>5、名称比较!????</h4><ul>
<li><p>名称的相等性：</p>
<p>‣ 名相等</p>
<p>‣ 指示物相同</p>
<p>‣ 指示物相等</p>
</li>
<li><p>原理：<strong>比较两个&#x2F;多个 名 所绑定的内存单元（值）</strong></p>
</li>
<li><p>确定两个名称<strong>是否绑定到同⼀值</strong>(语义2)的简单⽅式是 <strong>改后再读</strong></p>
<p>- 思考：相同？相等（解析相同）？不相同也不相等但最终解析相同？</p>
<p>- compare &amp; copy？ 深拷贝浅拷贝</p>
</li>
</ul>
<h4 id="6、名称发现"><a href="#6、名称发现" class="headerlink" title="6、名称发现"></a>6、名称发现</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230622175136488.png" alt="image-20230622175136488" style="zoom:80%;">



<h2 id="Lec03-命名"><a href="#Lec03-命名" class="headerlink" title="Lec03 命名"></a>Lec03 命名</h2><h3 id="1、设计需要考虑的因素"><a href="#1、设计需要考虑的因素" class="headerlink" title="1、设计需要考虑的因素"></a>1、设计需要考虑的因素</h3><blockquote>
<p><strong>模块化共享</strong></p>
<p>• 分模块设计并用名称连接，带来灵活性，但</p>
<p>- <strong>不同模块中可能包含相同名称的组件(名称冲突)。</strong></p>
<p>​	‣ 命名冲突，或为避免冲突互相了解模块内部名称，都破坏了模块化共享的思想（能共享，却⽆需了解其他模块的内部名称）。</p>
<p>- 所以，要模块化共享，不要名称冲突！</p>
<p>‣ 思路：让各个模块在自⼰上下⽂中运⾏，但要能实现交叉引用</p>
</blockquote>
<h4 id="1、解决名称冲突"><a href="#1、解决名称冲突" class="headerlink" title="1、解决名称冲突"></a>1、解决名称冲突</h4><p>问题：</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623142711377.png" alt="image-20230623142711377"></p>
<p>法一：</p>
<p><strong>同时保持2个上下⽂</strong></p>
<ul>
<li><p>在A的上下⽂中增加spell_check，绑定到B模块该组件</p>
</li>
<li><p>各个组件都显式绑定到各自的上下⽂</p>
</li>
</ul>
<p>​	<strong>- 即，在本组件中的名字，均使用该上下⽂解析。</strong></p>
<p>​	- 问题：要修改各个组件，修改的难度⼤、复杂度⾼</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623143426333.png" alt="image-20230623143426333"></p>
<p>法二：</p>
<ul>
<li><p><strong>解释器跟踪程序执⾏时的上下⽂（即维持默认上下⽂）</strong></p>
</li>
<li><p>（实线1）将spell_check链接到过程体  ×</p>
</li>
</ul>
<p>​		- 问题：进⼊spell_check后，解释器继续使用默认上下⽂，对其中</p>
<p>initialize就会错误使用。（不work）</p>
<ul>
<li>（虚线2）<strong>将spell_check作为间接名，链接到另⼀上下⽂中spell_check</strong> √</li>
</ul>
<p>​		- <strong>间接名这种特性，使解释器可切换上下⽂（work）</strong></p>
<blockquote>
<p>• 跟踪上下⽂+使用间接名，好用但是ad hoc（临时的，一次性的，只是针对当前情况的。）</p>
<p>• <strong>更优雅的closure(闭包)：打包自带静态上下⽂</strong></p>
<ul>
<li><p>在计算机系统中，合并上下文是指在处理多个进程间的切换时，将原先运行进程的状态保存在内存中，然后加载另一个进程的状态，这个过程就是上下文切换（Context Switching）。而当再次切换回原先进程的执行时，需要将先前保留在内存中的该进程的状态重新加载到CPU寄存器中，这个过程就是恢复上下文。</p>
<p>合并上下文是指，在上下文切换过程中，将多个进程需要保存的部分状态进行合并，减少上下文切换的开销。具体来说，假设有两个进程，它们的代码和数据有一定的相似性，那么合并上下文的做法就是将这些相似的部分的状态合并成一个上下文，并在上下文切换时直接使用这个上下文，而不需要每次都保存和加载相同的状态，从而减少了上下文切换的时间。这种做法可以提高系统的性能和吞吐量，在一些需要大量进程间切换的系统中特别有效。但是，需要注意的是，合并上下文也可能会增加代码和系统的复杂度，因此需要权衡利弊并谨慎应用。</p>
</li>
<li><p>静态上下文是指在编译时已经确定的上下文信息，包括变量、函数和类的定义、类型信息、作用域等。静态上下文在程序运行时不会改变。</p>
<p>在编译期间，编译器会对静态上下文进行分析和处理，以便生成目标代码。例如，在类型检查时，编译器会利用静态上下文来判断程序中各个变量和函数的类型是否一致，在语义分析时，编译器会利用静态上下文来判断程序是否符合语法规则，从而减少程序运行时的错误。</p>
<p>静态上下文的优势在于它可以提供编译期的检查和优化，从而提高程序的性能和可靠性。但是，缺点是它无法动态适应程序的运行时变化，例如用户输入的数据可能无法在编译期全部确定下来，需要在运行时进行判断，这时就需要动态上下文。</p>
</li>
</ul>
</blockquote>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623143435102.png" alt="image-20230623143435102"></p>
<h4 id="2、元数据"><a href="#2、元数据" class="headerlink" title="2、元数据"></a>2、元数据</h4><ul>
<li><p>定义：不包含在对象内部，或包含在对象内部却难以查找的，对象重要信息。</p>
<ul>
<li>⽂件为例：名称、唯⼀标识符、类型、时间、版本、所有者、witness等</li>
<li><strong>名称、上下⽂，都属于对象的元数据</strong>（metadata）</li>
</ul>
</li>
<li><p><strong>系统元数据有保存空间和访问⽅法，但除名称外，不支持自定义元数据</strong></p>
</li>
<li><p>⽆系统支持，常使用名称重载（name overloading）</p>
</li>
</ul>
<p>  - 名称重载：名称中放⼊满⾜引用功能之外的各种元数据</p>
<p>  - 例：扩展名，用地址做名称（下⼀节）</p>
<blockquote>
<p>名称重载</p>
<ul>
<li>没有重载的名称，称为pure name</li>
</ul>
<p>​	- 仅可：COMPARE, RESOLVE, BIND, UNBIND</p>
<ul>
<li><p>重载的名称，还可以</p>
<p>- 抽取重载的元数据</p>
</li>
<li><p>名称重载可能⽆害，也可能破坏模块化和抽象</p>
<ul>
<li><p>fragile name —— 根本原因：使用者希望名称不变，但重载会导致名称易变</p>
</li>
<li><p>使用pure name可以防⽌name fragility(脆弱)吗？—- 同时带来问题：寻址时只能搜索</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="3、地址"><a href="#3、地址" class="headerlink" title="3、地址"></a>3、地址</h4><ul>
<li><p>地址：是⼀类特殊的名字，它的特点是能定位（重载）：物理位置，或可映射到物理位置（parsing）</p>
<p>- 例：寄存器、内存地址、扇区号、I&#x2F;O端⼝、IP地址等</p>
<p>- 第⼆重用途：locator</p>
</li>
<li><p><strong>物理位置的⼏何特性 ，对应到连续自然数地址</strong></p>
<p>- 通常可对地址进⾏算术操作，对应到⼏何位置</p>
</li>
<li><p>问题：<strong>地址的脆弱性(易被攻击者直接获取或修改，而不受操作系统或硬件的保护，从而实现恶意攻击)</strong></p>
<p>- 建议：隐藏地址（decouple modules with indirection）</p>
<p>- <strong>原则：不应暴露地址给用户</strong></p>
<p>​	- 当地址作为名称，需要改名**(根本⽅法：用间接层隐藏地址，不使用地址做名称)**</p>
</li>
</ul>
<h4 id="4、唯一名称"><a href="#4、唯一名称" class="headerlink" title="4、唯一名称"></a>4、唯一名称</h4><ul>
<li><p>如何⽣成唯⼀名称</p>
<p>- <strong>连续整数（别溢出）</strong></p>
<p>- <strong>时间戳</strong></p>
<p>​	‣ [涨知识]UNIX系统时间为什么从1970-01-01开始？</p>
<p>- <strong>伪随机数发⽣器（PNG）</strong></p>
<p>​	‣ collision</p>
</li>
<li><p><strong>基于内容的唯⼀名称</strong></p>
<p>- 用内容来产⽣唯⼀名称：长</p>
<p>​	‣ <strong>短：利用hash</strong> - 输出定长，输⼊任意，例如：sha256、sm3</p>
<p>- 因为overloading（可witness内容） → 所以fragility（e.g 函数重载会导致程序变得脆弱）</p>
<p>- 长期数据存储系统适用（内容不变）</p>
</li>
<li><p>唯⼀名称的其他用途</p>
<p>- 临时ID</p>
</li>
<li><p>层级命名⽅案</p>
</li>
</ul>
<p>  - 层级的特性：delegation(<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33814685/article/details/92915190">委派</a>)</p>
<p>  ‣ 例：<strong>域名、MAC address</strong></p>
<p>  • 如何选定计算机的唯⼀标识？（用作版权保护等）</p>
<p>  - 并不简单</p>
<h4 id="5、用户友好性"><a href="#5、用户友好性" class="headerlink" title="5、用户友好性"></a>5、用户友好性</h4><h4 id="6、生命周期"><a href="#6、生命周期" class="headerlink" title="6、生命周期"></a>6、生命周期</h4><ul>
<li>名、值、绑定</li>
</ul>
<p>​	- <strong>名和值的⽣命周期⼀般长于绑定</strong></p>
<p>​		‣ 例：姓名&#x2F;电话，程序&#x2F;调用端⼝，DNS&#x2F;IP</p>
<ul>
<li><strong>分布式对绑定有稳定性的要求</strong></li>
</ul>
<h3 id="2、实例（URL-看）"><a href="#2、实例（URL-看）" class="headerlink" title="2、实例（URL  看）"></a>2、实例（URL  看）</h3><h2 id="Lec04-模块化"><a href="#Lec04-模块化" class="headerlink" title="Lec04 模块化"></a>Lec04 模块化</h2><h3 id="0-引文"><a href="#0-引文" class="headerlink" title="0.引文"></a>0.引文</h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623162315078.png" alt="image-20230623162315078"></p>
<ul>
<li><p><strong>C&#x2F;S：模块置于不同硬件设备，实施强制模块化</strong></p>
<p>- <strong>部署于不同的计算机</strong>，请求&#x2F;调用者为C，服务为S</p>
<p>- <strong>交互采用Client（客户端） - Service（服务器</strong>）的⽅式进⾏</p>
<p>- 交互的唯⼀⽅式是<strong>消息</strong></p>
<p>- <strong>强制模块隔离，带来3个收益</strong></p>
<p>​	<strong>‣ 减少设计复杂度</strong></p>
<p>​	<strong>‣ 限制故障传播</strong></p>
<p>​	<strong>‣ 安全隔离</strong></p>
</li>
<li><p><strong>C&#x2F;S是构建模块化系统、容错系统、安全系统的基本起点</strong></p>
</li>
<li><p>隔离⼤的模块，例：</p>
<ul>
<li>数据库系统：服务器S管理数据，客户端C展示数据</li>
<li>邮件系统：服务器S收发邮件，客户端C编辑邮件</li>
</ul>
</li>
<li><p>隔离小的模块，例：</p>
<ul>
<li>Microservices（下⼀页）</li>
</ul>
</li>
<li><p>软模块化为啥不好？</p>
</li>
</ul>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623163532087.png" alt="image-20230623163532087"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623163556054.png" alt="image-20230623163556054"></p>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623173853420.png" alt="image-20230623173853420"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623173845775.png" alt="image-20230623173845775"></p>
<h3 id="1-C-x2F-S架构"><a href="#1-C-x2F-S架构" class="headerlink" title="1.C&#x2F;S架构"></a>1.C&#x2F;S架构</h3><h4 id="1-C-x2F-S架构的介绍"><a href="#1-C-x2F-S架构的介绍" class="headerlink" title="1.C&#x2F;S架构的介绍"></a>1.C&#x2F;S架构的介绍</h4>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623164119262.png" alt="image-20230623164119262" style="zoom:80%;">

<blockquote>
<p>时序图的用途</p>
<ul>
<li>表示模块交互</li>
<li>体现 时间、模块、消息、消息内容</li>
<li>在后⾯的内容中，还⽤它演示消息的乱序、丢失和延迟</li>
</ul>
</blockquote>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623164353210.png" alt="image-20230623164353210" style="zoom:80%;">

<ul>
<li><p>强制模块化<strong>好处</strong></p>
<ul>
<li><p>状态分离、消息交互</p>
<blockquote>
<p>- <strong>错误⽆法通过消息之外的⽅式传播</strong></p>
<p>- 公平和<strong>安全</strong>的交互</p>
<p>- <strong>降低依赖</strong>和<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37653144/article/details/80297681">fate-sharing</a></p>
<p>​	‣ 遇到超时可更换服务</p>
<p>- 显式、良好定义的接⼝</p>
<p>​	‣ 易于抽象、替换</p>
<hr>
<p>人话（好处）：</p>
<p><strong>‣ 防⽌程序错误传播 ← 隔离</strong></p>
<p><strong>‣ 安全 ← 隔离</strong></p>
<p><strong>‣ 容错&#x2F;容灾&#x2F;可靠性 ← 分布</strong></p>
</blockquote>
</li>
<li><p>（全面简化）[sweeping simplification]</p>
</li>
</ul>
</li>
<li><p><strong>缺陷：</strong></p>
<ul>
<li><strong>语义错误、误用</strong>（注⼊、溢出等）</li>
<li><strong>解决可靠性 ≠ 正确性</strong>，错误计算的fate-sharing仍存在</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623165819530.png" alt="image-20230623165819530" style="zoom:80%;"></li>
</ul>
<h4 id="2-service-x2F-client的搭配"><a href="#2-service-x2F-client的搭配" class="headerlink" title="2.service&#x2F;client的搭配 ?"></a>2.service&#x2F;client的搭配 ?</h4><ul>
<li>1服务 - n：⽂件&#x2F;打印服务器</li>
<li>n服务 - 1：上⽹终端</li>
<li>service+client：client - www service - db service</li>
</ul>
<h4 id="3-可信中介"><a href="#3-可信中介" class="headerlink" title="3.可信中介"></a>3.可信中介</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623174128691.png" alt="image-20230623174128691"></p>
<h3 id="2-C-x2F-S通信"><a href="#2-C-x2F-S通信" class="headerlink" title="2.C&#x2F;S通信"></a>2.C&#x2F;S通信</h3><ul>
<li><p>C&#x2F;S交互过程：<strong>数据打包→请求消息→接收应答消息→解包</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623170951763.png" alt="image-20230623170951763"></p>
</li>
</ul>
<h4 id="1-程式化的C-x2F-S通信：RPC-远程过程调用"><a href="#1-程式化的C-x2F-S通信：RPC-远程过程调用" class="headerlink" title="1.程式化的C&#x2F;S通信：RPC(远程过程调用)"></a>1.程式化的C&#x2F;S通信：RPC(远程过程调用)</h4><ul>
<li><p>RPC目标：在C&#x2F;S远程通信上模拟本地过程调用</p>
</li>
<li><p>挑战：相互独立的架构 → 语义差异不可避免(两端语言不同，规范不同)</p>
<p>- 设计者必须解决</p>
<p>- 使用者（程序员）必须重视</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623171728648.png" alt="image-20230623171728648" style="zoom: 50%;"></li>
</ul>
<h4 id="2-RPC与本地调用语义不同"><a href="#2-RPC与本地调用语义不同" class="headerlink" title="2.RPC与本地调用语义不同"></a>2.RPC与本地调用语义不同</h4><ul>
<li><p><strong>差异</strong></p>
<p>- 1.限制故障传播，也看不到对⽅的错误</p>
<p>- 2.使用通信交互，引⼊新的错误（丢包、超时等）</p>
<p>- 3.时延（更适合于异步处理）</p>
<p>- 4.⼀些编程语⾔特性不能用，如全局变量、引用等</p>
</li>
<li><p><strong>处理</strong></p>
<p>- 1.本地可捕获异常处理，RPC则使用计时器捕获错误</p>
<p>- 2.需处理 “no response（无响应）”，且分不清⽹络&#x2F;程序错误（↯）</p>
<p>- 3.stub采用性能提升机制</p>
<p>  ​	‣ （缓存、流⽔线等，减少或隐藏时延）</p>
</li>
<li><p><strong>“ no response ”的三个处理策略</strong></p>
<blockquote>
<ol>
<li>At-least-once</li>
</ol>
<p>- <strong>反复操作直⾄收到回应（经典。。。。通常设上限）</strong></p>
<p>- 适用：idempotent（side-effect-free）的操作</p>
<ol start="2">
<li>At-most-once</li>
</ol>
<p>- 实现上有挑战（ch7案例，⽂献Birrell&amp;Nelson）</p>
<p>- 适用：有side-effect的操作</p>
<ol start="3">
<li>Exactly-once ：理想情况</li>
</ol>
<p>- <strong>通过较为复杂的消息交互和状态存储来实现</strong></p>
<p>​	‣ ⼀般⽅法：<strong>no response后，发送另外的消息询问状态</strong></p>
<p>​	‣ 涉及⼀致性和容错（ch8-ch10）</p>
</blockquote>
</li>
</ul>
<h4 id="3-不在线：用中介进⾏通信"><a href="#3-不在线：用中介进⾏通信" class="headerlink" title="3.不在线：用中介进⾏通信"></a>3.不在线：用中介进⾏通信</h4><ul>
<li><p>RPC要求双⽅在线，⼀⽅不在线，可用<strong>中介</strong>进⾏通信</p>
<ul>
<li><p>中介（buffered 通信）</p>
<p>- send和receive的语义又有所不同</p>
</li>
</ul>
</li>
</ul>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230623173216096.png" alt="image-20230623173216096"></p>
<h3 id="3-C-x2F-S案例-NFS"><a href="#3-C-x2F-S案例-NFS" class="headerlink" title="3.C&#x2F;S案例(NFS)"></a>3.C&#x2F;S案例(NFS)</h3><h2 id="Lec050607-虚拟化"><a href="#Lec050607-虚拟化" class="headerlink" title="Lec050607 虚拟化"></a>Lec050607 虚拟化</h2><ul>
<li><p>虚拟化可以1变多！（且隔离，基于命名的间接）</p>
</li>
<li><p><strong>虚拟化（virtualization）</strong>：通过间接⽅式，提供物理资源的模仿，<strong>实现复用、聚合和模拟三个功能。</strong></p>
<p>- 复用：只有1个，模仿多个</p>
<p>- 聚合：有很多个，模仿1个</p>
<p>- 模拟：有1个A，模仿B</p>
<blockquote>
<p>虚拟化技术能够实现资源的复用、聚合和模拟，从而实现更高的资源利用率和更好的资源管理。</p>
<ol>
<li><strong>资源复用</strong> &#x3D;&#x3D;虚拟化技术允许在一个物理服务器上运行多个虚拟服务器，而这些虚拟服务器都共享该物理服务器的资源&#x3D;&#x3D;，如 CPU、内存、存储和网络等。这样，即使一个虚拟机的资源使用率较低，其它虚拟机也可以利用其未使用的资源，从而达到资源复用的效果，提高硬件资源利用率。</li>
<li><strong>资源聚合</strong> &#x3D;&#x3D;虚拟化技术还允许将多个物理服务器上的资源聚合到一个虚拟化环境中，从而扩展应用程序的性能和容量&#x3D;&#x3D;。这些虚拟服务器可以在一个虚拟化环境中协同工作，形成一个资源池，使得应用程序可以分布式地利用这些资源。</li>
<li><strong>资源模拟</strong> &#x3D;&#x3D;虚拟化技术还可以提供虚拟化层来模拟硬件和软件环境，以使得应用程序能够在一个相对独立的环境中运行&#x3D;&#x3D;。通过模拟的方法，虚拟机可以使用与物理机相同的软件环境，从而提高应用程序的可移植性和可扩展性。同时，虚拟化技术还可以提供多个虚拟机实例，使得开发人员可以在不同的虚拟环境中测试和部署应用程序，从而提高开发的效率和安全性。</li>
</ol>
<p>总之，虚拟化技术通过资源复用、资源聚合和资源模拟等方法，可以高效地管理硬件资源，提高软件应用程序的可靠性和性能</p>
</blockquote>
</li>
<li><p><strong>复用</strong>提供了<strong>强制模块化</strong>的机会</p>
</li>
<li><p>动态地使用复用和聚合＝伸缩</p>
</li>
<li><p>什么样的业务可以虚拟化？</p>
<p>（复用）</p>
<ol>
<li><p><strong>任务可分割（一分多）</strong></p>
</li>
<li><p><strong>分割的任务轮流使用资源</strong></p>
</li>
</ol>
<p>（聚合）</p>
<ol start="3">
<li><strong>任务可并⾏（最后结果聚合到一块）</strong></li>
</ol>
</li>
</ul>
<h3 id="1-虚拟化"><a href="#1-虚拟化" class="headerlink" title="1.虚拟化"></a>1.虚拟化</h3><ul>
<li><p>虚拟化的用途</p>
<blockquote>
<p>- multiplexing（多路复用）：1 → n 功能：增多</p>
<p>- aggregating（聚合）：n → 1 功能：放⼤</p>
<p>- emulation（模拟）：A →B 功能：模仿</p>
</blockquote>
</li>
<li><p>基本目标：保持1个已有的接⼝</p>
<p>- <strong>虚拟化不创造新的接⼝，只模仿已有的接⼝</strong></p>
</li>
<li><p>如果模块没有良好接⼝，很难虚拟化</p>
<p>- 虚拟化前要先抽象出接⼝</p>
<p>​	‣ 简化了虚拟化的⼯作</p>
<p>​	‣ 使得虚拟化的目标得以清晰定义</p>
</li>
</ul>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230624132549382.png" alt="image-20230624132549382"></p>
<h4 id="1-虚拟计算机抽象（线程-虚拟内存-x3D-虚拟计算机-√）"><a href="#1-虚拟计算机抽象（线程-虚拟内存-x3D-虚拟计算机-√）" class="headerlink" title="1.虚拟计算机抽象（线程+虚拟内存 &#x3D; 虚拟计算机 √）"></a>1.虚拟计算机抽象（<strong>线程+虚拟内存 &#x3D; 虚拟计算机</strong> √）</h4><ul>
<li><p>挑战：确定可虚拟化的计算机抽象，再实现它</p>
<p>- 计算机3功能：<strong>运算、存储、通信</strong></p>
<p>- 计算机3组件：<strong>处理器、内存、通信链路</strong></p>
</li>
<li><p>结果：</p>
<p>- (线程)thread、（虚拟内存）virtual memory、SEND &amp; RECEIVE</p>
</li>
<li><p>设计实现：基于操作系统实施</p>
<p>- (或者说，<strong>这些功能构成了操作系统</strong>)</p>
</li>
</ul>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230624134845739.png" alt="image-20230624134845739"></p>
<h5 id="1-1虚拟处理器"><a href="#1-1虚拟处理器" class="headerlink" title="1.1虚拟处理器"></a>1.1虚拟处理器</h5><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230624140831913.png" alt="image-20230624140831913"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230624140839836.png" alt="image-20230624140839836"></p>
<h6 id="1-1-1-线程"><a href="#1-1-1-线程" class="headerlink" title="1.1.1 线程"></a>1.1.1 <strong>线程</strong></h6><blockquote>
<p>• <strong>抽象后的<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43769572/article/details/105576485#:~:text=%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8%E4%B8%AD%E7%9A%84%E4%B8%8B%E4%B8%80%E6%9D%A1%E6%8C%87%E4%BB%A4%E5%9C%B0%E5%9D%80%E7%BB%84%E6%88%90%E7%9A%84%E8%BD%A8%E8%BF%B9%E7%A7%B0%E4%B8%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E3%80%82,%E6%89%A7%E8%A1%8C%E6%B5%81%E6%98%AF%E9%80%BB%E8%BE%91%E4%B8%8A%E7%8B%AC%E7%AB%8B%E7%9A%84%E6%8C%87%E4%BB%A4%E5%8C%BA%E5%9F%9F%EF%BC%8C%E6%98%AF%E4%BA%BA%E4%B8%BA%E7%BB%99%E5%A4%84%E7%90%86%E5%99%A8%E5%AE%89%E6%8E%92%E7%9A%84%E5%A4%84%E7%90%86%E5%8D%95%E5%85%83%E3%80%82">执⾏流</a>称为线程</strong>（thread of execution 简称</p>
<p>thread）</p>
<p>- 如果我们抽象正确的话，它当然可以随时</p>
<p>‣ 移出处理器、停⽌</p>
<p>‣ 移⼊处理器、恢复</p>
<p>- 如果我们抽象正确的话，用1个sp就能代表它</p>
<p>- 1个线程拥有1个虚拟处理器</p>
<p>- （如果有了）线程怎么运⾏、怎么用？</p>
</blockquote>
<ul>
<li><p>线程如何使用？</p>
<blockquote>
<ul>
<li><strong>单线程</strong>：通过<strong>编写一个模块</strong>，<strong>将需要并发执行的代码序列包装成一个线程</strong>。可以使用线程库或者编程语言提供的线程相关的API来创建线程。</li>
<li><strong>多线程管理</strong>：可以将<strong>多个线程包含在一个模块中</strong>，以便更好地管理和控制线程的执行。例如，为每个设备启动一个线程，或者使用多线程来处理并发任务。<ul>
<li>问题：程序员必须处理<strong>数据争用</strong>。<strong>除⾮它们不同享数据</strong>，才没有惊吓。</li>
</ul>
</li>
<li><strong>线程分层</strong>：可以将线程分为不同的层次，如处理器层、操作系统线程层和应用线程层。这种方式可以实现多线程对多处理器的并行计算和交叠处理并发任务。</li>
</ul>
<p>例：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628143450376.png" alt="image-20230628143450376"></p>
<ul>
<li><strong>线程调度</strong>：<strong>使用线程管理器来分配处理器资源，以实现线程的分时执行</strong>。线程管理器可以根据需要切换线程的执行，使得多个线程可以并发运行。</li>
<li><strong>线程间通信</strong>：在多线程的环境下，线程之间可能需要进行通信和数据共享。可以使用线程间通信的机制，如共享内存、消息队列、信号量等，来实现线程之间的数据传递和同步。<br>需要根据具体的应用场景和需求来选择合适的线程使用方式。</li>
</ul>
</blockquote>
</li>
<li><p>线程（们）如何管理？</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628144641351.png" alt="image-20230628144641351"></p>
</li>
<li><p>线程管理通过&#x3D;&#x3D;线程管理器&#x3D;&#x3D;来实现线程的创建、销毁和调度，<u><strong>以实现线程的隔离和分时运行</strong>。<strong>线程的切换</strong>可以通过<strong>自觉出让</strong>和<strong>时钟中断</strong>来实现，异常机制可以处理线程产生的异常</u>。</p>
<blockquote>
<ol>
<li><p>线程管理是通过线程管理器来实现的。线程管理器负责管理线程的创建、销毁和调度。它可以将多个线程复用在少量的处理器上，实现线程的隔离和分时运行。线程管理器记录足够的线程状态，以便在需要时进行线程的切换。</p>
</li>
<li><p>线程的调度可以通过自觉出让和时钟中断来实现。1.<strong>线程可以自愿地让出处理器</strong>，也可以 2.<strong>在时钟中断发生时，由CPU执行线程管理代码，按照规则进行线程的切换</strong>。让多个线程在处理器上并发运行，从而提高系统的并发性和效率。</p>
<blockquote>
<ol>
<li>自愿出让是指线程在执行过程中，主动让出处理器，让其他线程有机会执行。这可以通过线程管理器的调度算法来实现，当一个线程执行一段时间后，可以通过调用特定的函数或指令来告知线程管理器自愿让出处理器。</li>
<li>时钟中断是指当时钟定期引发时钟中断时，CPU会执行线程管理代码，按照一定的规则进行线程的切换。在时钟中断发生时，CPU会保存当前线程的状态，然后根据调度算法选择下一个要执行的线程，并将其状态恢复，继续执行。</li>
</ol>
</blockquote>
</li>
<li><p>线程管理还可以使用异常机制来处理线程产生的异常。异常是当前线程产生的非正常变化，当操作无法完成时会发生异常，例如除以0。中断和异常的处理程序在安全性考虑上有所不同。</p>
</li>
</ol>
</blockquote>
</li>
</ul>
<h5 id="1-2-虚拟内存"><a href="#1-2-虚拟内存" class="headerlink" title="1.2 虚拟内存"></a>1.2 虚拟内存</h5><ul>
<li><p>内存：是暂时存储进程以及数据的地方</p>
</li>
<li><p>方式：</p>
<ol>
<li><p><strong>阶段1：内存互相隔离（用线程管理器）</strong></p>
</li>
<li><p><strong>阶段2：增加⼀个间接层，使线程拥有虚拟地址和空间</strong></p>
</li>
</ol>
<blockquote>
<p>‣ <u>虚拟地址可使用线程做上下⽂，从⽽使用相同地址</u>（通过虚拟地址访问物理地址，从而访问空间？）</p>
<p>‣ 虚拟地址<strong>可延迟绑定，从⽽具备很⼤的虚拟地址空间</strong></p>
<p>‣ 使用上下⽂，使内存互相隔离</p>
</blockquote>
</li>
<li><p>使用原因：</p>
<blockquote>
<ul>
<li><strong>内存隔离</strong>：虚拟内存可以将不同的程序的内存空间隔离开来，使它们互不干扰。这样可以防止一个程序的错误影响到其他程序，提高系统的稳定性和安全性。</li>
<li><strong>内存扩展</strong>：<u>虚拟内存可以将物理内存和硬盘空间结合起来</u>，使得程序可以使用比物理内存更大的虚拟地址空间。当物理内存不足时，虚拟内存可以将一部分数据存储到硬盘上，从而扩展了可用的内存空间。</li>
<li><strong>延迟分配（延迟绑定内存空间）</strong>：<u>虚拟内存可以将内存的分配延迟到实际需要使用时再进行，而不是在程序启动时就分配所有的内存</u>。这样可以节省内存资源，提高系统的效率。</li>
<li><strong>共享内存</strong>：虚拟内存可以实现内存的共享，多个程序可以共享同一块内存区域，从而实现数据的共享和通信。<br>总的来说，虚拟内存可以提供更大的内存空间、更好的内存管理和更高的系统性能，使得程序的开发和运行更加灵活和高效。</li>
</ul>
</blockquote>
</li>
</ul>
<h5 id="1-3-线程间通信：有界缓冲区（在共享内存）"><a href="#1-3-线程间通信：有界缓冲区（在共享内存）" class="headerlink" title="1.3 线程间通信：有界缓冲区（在共享内存）"></a>1.3 线程间通信：有界缓冲区（在共享内存）</h5><ul>
<li><p>问题：<strong>线程之间需要交换数据&#x2F;交互</strong> 怎么办？</p>
</li>
<li><p>⽅案：<strong>有界缓冲区</strong></p>
</li>
</ul>
<p>  - SEND：插⼊数据，满则等待</p>
<p>  - RECEIVE：读取数据，空则等待</p>
<p>  • 该抽象链路上，还可以实现RPC（Remote Procedure Call 远程过程调用）</p>
<h5 id="1-4-操作系统接口"><a href="#1-4-操作系统接口" class="headerlink" title="1.4 操作系统接口"></a>1.4 操作系统接口</h5><h6 id="1-4-1-在硬-软接口层上，可以实施哪些虚拟化技术："><a href="#1-4-1-在硬-软接口层上，可以实施哪些虚拟化技术：" class="headerlink" title="1.4.1 在硬-软接口层上，可以实施哪些虚拟化技术："></a>1.4.1 在硬-软接口层上，可以实施哪些虚拟化技术：</h6><ol>
<li><strong>模块虚拟化</strong>：针对各个模块进行抽象虚拟化。</li>
<li>虚拟机（virtual machine）：虚拟整个自身，复用。其中包括虚拟机监视器（virtual machine monitor）作为管理器。</li>
<li><strong>模拟器</strong>：虚拟化一套硬件接口，不一定复用。模拟器的用途包括在新的硬件上使用旧的软件进行低成本迁移，以及在旧硬件上提前开发。</li>
</ol>
<h6 id="1-4-2-逐步实现虚拟化过程"><a href="#1-4-2-逐步实现虚拟化过程" class="headerlink" title="1.4.2 逐步实现虚拟化过程"></a><strong>1.4.2 逐步实现虚拟化过程</strong></h6><ol>
<li>从(弱)假设开始：首先，我们需要从一些假设开始，例如处理器多于线程，中断处理程序也有自己的专用处理器，以及内存共享。</li>
</ol>
<ul>
<li>共享内存和控制器：接下来，我们可以通过使用共享内存和控制器来实现虚拟化的第一步。这将帮助我们建立有效的虚拟通信链路，从而构成C&#x2F;S模式。</li>
<li>内存保护机制：为了解决共享内存破坏模块化的问题，我们需要引入内存保护机制，以确保不同模块之间的内存访问是安全的。</li>
<li>内存不共享：为了进一步实现虚拟化，我们可以考虑不共享内存，从而实现更好的隔离和模块化。</li>
<li>处理器不独占，多线程实现基本目标：通过实现多线程，我们可以实现处理器不独占的目标，从而支持更多的任务并发。</li>
<li>有条件出让(物理)处理器、及唤醒机制：为了实现更灵活的资源管理，我们可以考虑有条件地出让物理处理器，并实现唤醒机制，以便在需要时重新分配资源。</li>
<li>实例分析：最后，我们可以通过对特定硬件架构的实例分析，逐步支持模块化和虚拟化的目标。<br>请注意，这只是一个大致的步骤，具体的实现方法可能会因不同的情况而有所不同。</li>
</ul>
<h3 id="2-虚拟（通信）链路"><a href="#2-虚拟（通信）链路" class="headerlink" title="2. 虚拟（通信）链路"></a>2. 虚拟（通信）链路</h3><ul>
<li><p>虚拟链路是通过虚拟化技术实现的一种通信链路。<strong>它可以模拟出多个实际的通信链路，实现资源的复用和聚合</strong>。虚拟链路可以<u>用于实现任务的并发执行，从而支持强制模块化</u>。<u>常见的虚拟（通信）链路包括<strong>管道（文件系统）</strong>和<strong>套接字（网络）</strong>。</u></p>
</li>
<li><p>虚拟通信链路是一种通过共享内存中的有界缓冲区进行通信的机制。它可以实现客户端-服务器模式的通信，其中客户端和服务器通过共享内存中的缓冲区进行数据交换。&#x3D;&#x3D;虚拟通信链路的关键是如何协调两个线程对同一块内存的并发访问，以确保通信的正确性&#x3D;&#x3D;。</p>
</li>
<li><p>如何协调两个线程对同一块内存的并发访问：使用 &#x3D;&#x3D;有界缓冲区 + 发送&#x2F;接收原语&#x3D;&#x3D;</p>
</li>
</ul>
<h4 id="1-SEND-amp-RECEIVE-接⼝"><a href="#1-SEND-amp-RECEIVE-接⼝" class="headerlink" title="1.SEND &amp; RECEIVE 接⼝"></a>1.SEND &amp; RECEIVE 接⼝</h4><ul>
<li><p>SEND &amp; RECEIVE 接口是一种用于线程间通信的抽象接口。它包括<strong>四个原语</strong>：<u>分配、释放、发送和接收</u>。</p>
<ul>
<li><p><strong>分配</strong>（allocate）：用于分配n个消息大小的缓冲区。</p>
</li>
<li><p><strong>释放</strong>（）：用于释放缓冲区。</p>
</li>
<li><p><strong>发送</strong>：用于向缓冲区插入消息，如果缓冲区已满，则等待。</p>
</li>
<li><p><strong>接收</strong>：用于从缓冲区读取消息，如果缓冲区为空，则等待。</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628180612337.png" alt="image-20230628180612337"></p>
<p>这些原语可以通过本地RPC（远程过程调用）的方式实现，对调用者来说与RPC无差别。</p>
</li>
</ul>
</li>
</ul>
<h4 id="2-序列消息协调"><a href="#2-序列消息协调" class="headerlink" title="2.序列消息协调"></a>2.序列消息协调</h4><ul>
<li><p>双⽅都有可能等候，需要协调</p>
</li>
<li><p>两线程sender和receiver：处理器不共用、可并⾏，<strong>1 thread&#x3D;1 processor</strong></p>
<blockquote>
<p>一个线程对应一个处理器。这意味着每个线程都会被分配一个独立的处理器来执行其指令流。这种方式可以实现并行计算，提高处理器的利用率。</p>
</blockquote>
</li>
<li><p><strong>应用场景</strong>：是在多线程环境下的sender和receiver之间进行协调。它的<strong>目的</strong>是<u>为了保证线程之间的事件的先后顺序，解决著名的producer and consumer问题中的sequence coordination（序列协调）问题。</u><br>具体来说，消息序列协调<u>可以解决</u>以下问题：</p>
<ol>
<li><u>在多线程环境下</u>，<strong>保证事件的先后顺序</strong>，避免数据竞争和不确定性。</li>
<li>在<u>多线程环境</u>下，<strong>确保receiver能够正确地接收到sender发送的消息，避免消息丢失或失效</strong>。</li>
<li>在异步连接中，协调同步岛屿之间的通信，确保数据的正确传输。<br>总之，消息序列协调可以帮助程序员实现自动化的机制，协调不同流派的程序员在不同领域中的工作，提高系统的可靠性和性能。</li>
</ol>
</li>
<li><p>流程：</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628171853579.png" alt="image-20230628171853579"></p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628172400021.png" alt="image-20230628172400021" style="zoom:80%;">

<p>进一步改进：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628172605047.png" alt="image-20230628172605047" style="zoom:80%;">

<ul>
<li>&#x3D;&#x3D;before-or-after原⼦性&#x3D;&#x3D;是指<u>一个操作在执行过程中不会被中断，要么完全执行，要么完全不执行</u>。这种原子性的操作可以确保操作的正确性和一致性，避免了并发操作导致的竞态条件和数据不一致的问题。在多线程或多进程的环境中，保证操作的before-or-after原子性是非常重要的。</li>
</ul>
</li>
</ul>
<h4 id="3-Race-condition（竞态条件）"><a href="#3-Race-condition（竞态条件）" class="headerlink" title="3. Race condition（竞态条件）"></a>3. Race condition（竞态条件）</h4><ul>
<li><p>竞态条件是指两个或多个线程对共享资源的操作时序会导致错误的情况。</p>
</li>
<li><p><strong>去掉假设1和假设5会导致竞态条件（race condition）的错误</strong></p>
<blockquote>
<ol>
<li>(去掉假设1)在多sender的情况下，如果没有正确的同步机制，多个发送者可能会同时访问共享资源，导致数据的不一致性和错误的结果。</li>
<li>去掉假设5会导致before-or-after原子性不再保证。<u>在多线程环境下，如果没有原子性保证，多个线程对共享资源的操作可能会交错执行，导致不可预测的结果</u>。例如，一个线程可能在另一个线程读取共享资源之前修改了该资源，导致读取到错误的数据。—-因此为了保证，操作时上锁？<br>因此，去掉假设1和假设5会增加并发编程的困难性，使得编写正确的程序和调试错误变得更加困难。</li>
</ol>
</blockquote>
</li>
</ul>
<h4 id="4-锁（lock）"><a href="#4-锁（lock）" class="headerlink" title="4. 锁（lock）"></a>4. 锁（lock）</h4><ul>
<li><p><strong>为什么有竞态条件？</strong></p>
<p>因为在多线程或并发环境下，<u><strong>多个线程同时访问和操作共享资源</strong></u>，而没有进行适当的同步控制。这种情况下，<u>线程之间的<strong>执行顺序是不确定</strong>的</u>，导致了竞态条件的发生</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628182813105.png" alt="image-20230628182813105" style="zoom:80%;">
</li>
<li><p>锁可以强制保证假设1和5</p>
<p>- 为什么？</p>
</li>
<li><p>锁 <strong>两个原语：</strong></p>
<ul>
<li><strong>ACQUIRE（取得锁）</strong></li>
<li><strong>RELEASE（释放锁）</strong></li>
</ul>
</li>
<li><p><strong>初级实现</strong></p>
<p>锁的初级实现是<strong>通过使用一个锁来保护一组共享缓冲区的操作序列</strong>。在实现中，</p>
<p><u>检验当队列的大小等于0（或N）时，加锁，然后释放锁并再次检查。</u></p>
<p><u>检验当队列的大小不等于0（或N）时，以及进行操作、发送消息和更改in&#x2F;out三个动作时，加锁并释放锁</u>。这样可以实现对共享缓冲区的保护。</p>
</li>
</ul>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628183449420.png" alt="image-20230628183449420" style="zoom:80%;">

<ul>
<li><p>acquire和release的常见实现：（single acquire protocol）只有1个线程可获得锁</p>
<blockquote>
<p>不⼀定需要这么严格（比如两个读线程可以并发）</p>
</blockquote>
</li>
<li><p><strong>分类</strong></p>
<p>细粒度锁是一种锁的使用方式，它将锁的粒度尽可能地缩小，只保护共享资源的特定部分，而不是整个资源。这样可以提高并发性和性能。粗~类推</p>
<blockquote>
<ul>
<li><strong>（细粒度锁）使用多个锁</strong>：将共享资源分成多个部分，为每个部分分配一个独立的锁。这样不同的线程可以同时访问不同的部分，从而提高并发性。但是，<strong>使用多个锁会增加复杂度和降低可读性。</strong></li>
<li><strong>（粗粒度锁）使用一个锁</strong>：将所有共享资源都用一个锁来保护。这样可以确保<strong>所有对共享资源的操作都是串行化的，避免了竞态条件</strong>。但是，<strong>这也意味着所有线程在访问共享资源时都需要获取同一个锁，可能会导致性能瓶颈。</strong><br>选择使用哪种方式取决于具体的应用场景和性能需求。细粒度锁的实现需要权衡并发性和性能之间的关系。</li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="5-死锁"><a href="#5-死锁" class="headerlink" title="5. 死锁"></a>5. 死锁</h4><ul>
<li><p>死锁是指&#x3D;&#x3D;在多线程或多进程的环境中，两个或多个线程或进程互相等待对方释放资源，导致所有线程或进程都无法继续执行的情况&#x3D;&#x3D;。在死锁中，每个线程或进程都在等待其他线程或进程释放资源，而没有任何一个线程或进程能够继续执行下去。这种情况下，系统无法进行进一步的处理<strong>，只能通过外部干预来解除死锁。</strong>（e.g  DB 采用回滚方式）</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628190056031.png" alt="image-20230628190056031" style="zoom:80%;">

<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628192157308.png" alt="image-20230628192157308"></p>
</li>
</ul>
<h4 id="6-实现锁原语–累了"><a href="#6-实现锁原语–累了" class="headerlink" title="6. 实现锁原语–累了"></a>6. 实现锁原语–累了</h4> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628203116704.png" alt="image-20230628203116704" style="zoom:80%;">

<p>怀疑错的原因是加锁操作要是原子操作，不能在里面插入其他语句（循环，条件）</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628203956361.png" alt="image-20230628203956361"></p>
<h4 id="7-借助One-writer-principle"><a href="#7-借助One-writer-principle" class="headerlink" title="7. 借助One-writer principle"></a>7. 借助One-writer principle</h4><h3 id="3-内存模块化"><a href="#3-内存模块化" class="headerlink" title="3.内存模块化"></a>3.内存模块化</h3><h2 id="Lec08-性能"><a href="#Lec08-性能" class="headerlink" title="Lec08 性能"></a>Lec08 性能</h2><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628205657848.png" alt="image-20230628205657848"></p>
<h3 id="1-性能设计"><a href="#1-性能设计" class="headerlink" title="1. 性能设计"></a>1. 性能设计</h3><ul>
<li><p><strong>性能瓶颈产生因素</strong>：<strong>物理</strong>限制、<strong>技术</strong>限制和<strong>成本</strong>限制。</p>
<ol>
<li>物理限制包括<strong>光速限制</strong>、<strong>功率限制</strong>和<strong>散热限制。</strong></li>
<li>技术限制包括<strong>算法、可靠性</strong>。</li>
<li>成本限制是指在设计过程中受到成本的限制，导致技术维度发展不均衡.</li>
</ol>
</li>
<li><p><strong>性能设计的挑战</strong></p>
<ol>
<li><p>&#x3D;&#x3D;判断性能优化在技术进步下的价值&#x3D;&#x3D;：<u>如何确定性能优化是否能够在技术进步的情况下产生价值，</u></p>
<blockquote>
<ul>
<li><p>固有（物理）瓶颈：只能依靠优化设计（cpu设计？）</p>
</li>
<li><p>技术瓶颈：可以依靠技术进步</p>
</li>
<li><p>难题：如何判断一个瓶颈是固有的还是技术原因造成的。（即：努⼒做了优化版本，产品发布时瓶颈已被技术消除）</p>
</li>
</ul>
</blockquote>
</li>
<li><p>&#x3D;&#x3D;保持设计的简单性&#x3D;&#x3D;：在提升性能的过程中，如何保持设计的简单性？</p>
<blockquote>
<p>提升性能用到多类组件（如存储），可通过抽象统⼀接⼝，保持模块化和简单性</p>
</blockquote>
</li>
<li><p>共享性能的多目标问题：性能设计往往需要在多个目标之间进行权衡，例如总体利用率最高、平均等待最短、服务个体最多等，需要找到合适的Trade-off策略。</p>
</li>
<li><p>物理、技术和成本限制：性能设计受到物理、技术和成本等方面的限制，例如光速限制、功率限制、散热限制等，这些限制可能导致技术维度发展不均衡，需要找到合适的解决方案。</p>
</li>
</ol>
</li>
</ul>
<h4 id="1-1-性能指标"><a href="#1-1-性能指标" class="headerlink" title="1.1 性能指标"></a>1.1 性能指标</h4><ul>
<li><p>计算机系统⼯作场景：<strong>模块化 + 处理请求 &#x3D; 请在模块间传递（如C&#x2F;S）</strong></p>
</li>
<li><p><u>四个性能指标</u></p>
<ol>
<li><p><strong>容量（Capacity）</strong>：指系统提供的资源的大小或数量。例如，CPU的容量可以表示为时钟周期的数量。—— 提供多少(服务)</p>
</li>
<li><p><strong>利用率（Utilization</strong>）：指服务资源用于给定工作负载的比例。例如，CPU的利用率可以表示为使用时间与总时间的比值。—— 资源有⽆浪费</p>
<blockquote>
<p>CPU容量&#x3D;时钟周期，利用率&#x3D;使用&#x2F;空转</p>
</blockquote>
</li>
<li><p><strong>时延（Latency）</strong>：指输入和输出之间的时间差。—— 请求等待多久</p>
<blockquote>
<p>C&#x2F;S语境下：请求&#x2F;应答的时间差 &#x3D; 发出+处理+发回</p>
</blockquote>
</li>
<li><p><strong>吞吐量&#x2F;吞吐率（Throughput）</strong>：指完成有用工作的速率。—— 处理(请求)速率如何</p>
<blockquote>
<p><strong>吞吐率与时延的关系</strong></p>
<p>- <strong>逐个（串行）处理</strong>：<u>吞吐率 &#x3D; 1&#x2F;时延 —— 吞吐量受限于最慢的部件</u></p>
<p>- <strong>并发处理</strong>：⽆直接关系</p>
</blockquote>
</li>
</ol>
</li>
</ul>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628220231504.png" alt="image-20230628220231504" style="zoom:80%;">

<h4 id="1-2性能设计总体方法"><a href="#1-2性能设计总体方法" class="headerlink" title="1.2性能设计总体方法"></a>1.2性能设计总体方法</h4><ul>
<li><p><strong>（正确）系统化⽅法</strong></p>
<ol>
<li><p><strong>分析所有步骤，通过测量、分析、计算，找到瓶颈。</strong></p>
</li>
<li><p><strong>提升最差模块的性能。</strong></p>
<p><u>(错误)⼯程师精益求精地优化某⼀部件，忽视收益递减法则</u></p>
</li>
</ol>
</li>
<li><p><strong>总结经验教训</strong></p>
<ol>
<li><p>始终坚持系统化方法：<u>迭代改进，关注收益递减法则。</u></p>
<blockquote>
<ul>
<li>首先，进行性能测量，确定是否存在性能问题，以及具体是哪个指标受到影响。</li>
<li>进行精确测量，找到系统中的瓶颈，即最慢的环节。</li>
<li>提出改进方案，并对其进行粗略评估，例如假设将问题转移到性能第二差的模块，评估改进的收益。</li>
<li>根据评估结果，得出结论。如果发现解决瓶颈无法改善性能，需要重新审视系统的设计和需求，看是否可以重新设计系统来达到性能目标。<br>通过以上迭代的过程，可以逐步改进系统的性能，关注收益递减法则，确保每一次改进都能带来实际的性能提升。</li>
</ul>
</blockquote>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628221925641.png" alt="image-20230628221925641" style="zoom:80%;">
</li>
<li><p><u>如果收益递减且达不成目标，重新审视系统的设计</u>。</p>
</li>
</ol>
</li>
</ul>
<h4 id="1-3-优化方法"><a href="#1-3-优化方法" class="headerlink" title="1.3 优化方法"></a>1.3 <strong>优化方法</strong></h4><h5 id="1-3-1-时延：基于⼯作负载（计算机系统在特定时间段内所处理的任务或工作量）"><a href="#1-3-1-时延：基于⼯作负载（计算机系统在特定时间段内所处理的任务或工作量）" class="headerlink" title="1.3.1 时延：基于⼯作负载（计算机系统在特定时间段内所处理的任务或工作量）"></a>1.3.1 时延：基于⼯作负载（计算机系统在特定时间段内所处理的任务或工作量）</h5><ul>
<li><p>该前提下，时延受限于<strong>物理、技术、经济</strong>条件</p>
<blockquote>
<p>物理：请求或信号传输的距离太远？</p>
<p>技术：算法太慢？</p>
<p>经济：内存或磁盘空间太小，花多点钱买贵的？</p>
</blockquote>
</li>
<li><p><strong>评估指标(收益)：平均时延下降</strong></p>
<blockquote>
<p>平均时延&#x3D;概率₁ * 时延₁+概率₂ * 时延₂+…</p>
</blockquote>
</li>
</ul>
<h5 id="1-3-2时延：基于并发"><a href="#1-3-2时延：基于并发" class="headerlink" title="1.3.2时延：基于并发"></a>1.3.2时延：基于并发</h5><ul>
<li><p>理想：利用并发，实现 n个处理器：时延变1&#x2F;n</p>
</li>
<li><p>现实（反而增加了时延）：</p>
<ul>
<li><p><strong>并行化也会带来一些开销</strong>，比如模块间的通信和交换中间结果会浪费时间。</p>
</li>
<li><p><strong>不平衡的并行化</strong></p>
<blockquote>
<p>并行不平衡指的是在并行任务中，不同的子任务完成时间不一致，导致某些处理器空闲等待其他处理器完成任务。这会降低系统的吞吐率，因为某些处理器无法充分利用其计算能力。</p>
</blockquote>
</li>
<li><p><strong>不完全并行化</strong>：并行任务中存在子任务之间的依赖或资源共享等问题。</p>
</li>
<li><p><strong>很多应用难以并行化</strong></p>
</li>
</ul>
<p><u>因此，并发对时延的影响是复杂的，并且需要综合考虑各种因素</u>。    </p>
<blockquote>
<p>例子：</p>
<p><strong>搜索引擎工作</strong>：前端将查询发给所有后端主机（未并⾏部分），主机并⾏⼯作（不平衡），回收结果并排序（并⾏开销），⽣成⽹页并给浏览器（未并⾏部分）</p>
</blockquote>
</li>
</ul>
<h5 id="1-3-3提升吞吐率：多级流⽔线"><a href="#1-3-3提升吞吐率：多级流⽔线" class="headerlink" title="1.3.3提升吞吐率：多级流⽔线"></a>1.3.3提升吞吐率：多级流⽔线</h5><ul>
<li><p>多级流水线可以提升计算机系统的吞吐率。</p>
<p>先判断是否能将任务拆分为并行子任务，减少时延同时提升吞吐率。</p>
<p>如果任务无法拆分为并行子任务，可以将其拆分为串行子任务，并设计一个流水线&#x2F;装配线来解耦子任务，每个子任务分配一个线程。虽然并发无法减少时延，但可以提升吞吐率。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628225745960.png" alt="image-20230628225745960" style="zoom:80%;">
</li>
<li><p>多级流水线面临的挑战&#x2F;困难</p>
<ol>
<li><strong>子模块的工作均衡问题</strong>：<u>有些模块可能跟不上进度，导致整个流水线的性能受限。</u>为了缓解这个问题，可以在子模块之间引入bounded buffer(有界缓冲区，可以防止请求过多)，以平衡工作负载。</li>
</ol>
<ul>
<li><strong>需要有多个并发的请求</strong>：<u>多级流水线需要同时处理多个并发的请求</u>，这可能会增加系统的复杂性和并发控制的难度。</li>
<li><strong>交叉存取（interleaving）</strong>：多级流水线的设计提供了新的机会，但也引入了交叉存取的问题，需要考虑如何合理地安排和管理并发请求的执行顺序。</li>
</ul>
</li>
</ul>
<h4 id="1-4-排队问题"><a href="#1-4-排队问题" class="headerlink" title="1.4 排队问题"></a>1.4 排队问题</h4><ul>
<li><p>排队的原因：</p>
<ol>
<li><p>请求超过服务容量</p>
</li>
<li><p>吞吐率最低的模块过载运⾏，无法跟上其他模块的处理速度（常伴随其他模块空转）</p>
<p>思考：排队时延与处理时延有什么不同？</p>
<blockquote>
<ul>
<li><strong>排队时延</strong>是指<strong>请求在排队等待处理的时间</strong>，即从请求进入系统到开始被处理的时间。</li>
<li><strong>处理时延</strong>是指<strong>请求在被处理的过程中所花费的时间</strong>，即从开始处理到处理完成的时间。<br>排队时延是由于请求的数量超过了系统的处理能力或某个模块的处理能力不足而产生的，而处理时延是由于具体的处理过程所需要的时间而产生的</li>
</ul>
</blockquote>
</li>
</ol>
</li>
<li><p>排队模型</p>
<blockquote>
<p>• service time（服务时间）：处理完⼀个请求的时间</p>
<p>- offered load（负载）：请求的速率</p>
<p>- overload（过载）：服务容量不能满⾜请求的情况</p>
<p>• 假设：</p>
<p>- 随机⽆记忆的过程</p>
<p>- 独立指数分布的服务时间</p>
<p>• 结论：&#x3D;&#x3D;平均排队延迟为1&#x2F;(1-ρ)，ρ为服务利用率&#x3D;&#x3D;</p>
</blockquote>
</li>
</ul>
<ul>
<li><ul>
<li>例子：</li>
</ul>
<blockquote>
<p>如果平均每2条指令访问⼀次内存，处理器以并发方式发送5个访存请求给内存：</p>
<p>- 取决于应用程序模式</p>
<p>a. 每2条指令1访存：队列长度固定、时延固定</p>
<p>b. 每10条指令5访存：队列长度有上限、时延波动</p>
<p>c. 如果随机分布：队列长度⽆上限、平均时延1&#x2F;(1-ρ）</p>
</blockquote>
</li>
</ul>
<ul>
<li><p><strong>应对过载</strong>  </p>
<ul>
<li><p>短时间过载：<strong>排队</strong></p>
</li>
<li><p>长时间过载</p>
<ol>
<li><p><strong>提⾼服务容量</strong></p>
</li>
<li><p><strong>降低负载</strong>（shed load），方法如下</p>
</li>
</ol>
</li>
<li><p><strong>限额（quota）方法</strong>：限制活动进程的数量、限制打开文件的数量等。</p>
<ul>
<li><strong>有界缓冲区方法</strong>：通过使用有界缓冲区来控制系统的负载。当缓冲区满时，停止接收新的请求，将瓶颈倒推给请求的发起者。（可以调小有界缓冲区卡住请求）</li>
</ul>
</li>
<li><p><strong>换出负载</strong>：<u>将一些无法胜任的负载从系统中移除，以减轻系统的负载。</u></p>
</li>
</ul>
</li>
</ul>
<h4 id="1-5-应对瓶颈的其他方法（如果前述的平衡、并发等⽅法，都⽆法消除瓶颈）"><a href="#1-5-应对瓶颈的其他方法（如果前述的平衡、并发等⽅法，都⽆法消除瓶颈）" class="headerlink" title="1.5 应对瓶颈的其他方法（如果前述的平衡、并发等⽅法，都⽆法消除瓶颈）"></a>1.5 应对瓶颈的其他方法（如果前述的平衡、并发等⽅法，都⽆法消除瓶颈）</h4><ol>
<li><strong>批处理（Batching）</strong>：<u>将多个操作打包处理，减少固定时延的次数，提高效率</u>。适用于读写硬盘等操作。</li>
</ol>
<ul>
<li><strong>空转（Dallying）</strong>：（就是发呆）<u>推迟操作，等待操作过时或创造批处理的机会</u>。适用于写硬盘等操作。需要根据具体情况分析对时延的影响。</li>
</ul>
<ol start="3">
<li><strong>推测（Speculation）</strong>：提前推测，投机执行，降低时延。利用空闲资源，用忙资源处理周期长的任务，及时交付。需要预测和处理可能的资源浪费。</li>
</ol>
<h3 id="2-I-x2F-O应用样例"><a href="#2-I-x2F-O应用样例" class="headerlink" title="2. I&#x2F;O应用样例"></a>2. I&#x2F;O应用样例</h3><h3 id="3-多级存储"><a href="#3-多级存储" class="headerlink" title="3.多级存储"></a>3.多级存储</h3><h3 id="4-调度（看下）"><a href="#4-调度（看下）" class="headerlink" title="4.调度（看下）"></a>4.调度（看下）</h3><h2 id="lec09-网络设计思想"><a href="#lec09-网络设计思想" class="headerlink" title="lec09 网络设计思想"></a>lec09 网络设计思想</h2> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230628234532666.png" alt="image-20230628234532666" style="zoom:80%;">

<h3 id="1-网络是什么（网络设计细节）"><a href="#1-网络是什么（网络设计细节）" class="headerlink" title="1.网络是什么（网络设计细节）"></a>1.网络是什么（网络设计细节）</h3><p><strong>萌芽</strong>：分组交换网，分组广播网</p>
<h4 id="1-0-设计⽹络的考虑因素"><a href="#1-0-设计⽹络的考虑因素" class="headerlink" title="1.0.设计⽹络的考虑因素"></a>1.0.设计⽹络的考虑因素</h4><ul>
<li><p>通信本身的<strong>物理性质导致的限制</strong>，如传播时间、数据率、计算机数量等。</p>
</li>
<li><p><strong>共享机制的目标</strong></p>
<blockquote>
<ol>
<li>减少链路数量：N&lt;&lt;N(N-1)&#x2F;2 </li>
<li>通信代价共享</li>
</ol>
</blockquote>
</li>
<li><p>挑战：网络规模的参数跨度，即网络的局部、广阔、全球等范围。</p>
</li>
</ul>
<p>- 减少链路数量：N&lt;&lt;N(N-1)&#x2F;2</p>
<p>- 通信代价共享</p>
<h4 id="1-1-基本设计：（链路）复用"><a href="#1-1-基本设计：（链路）复用" class="headerlink" title="1.1 基本设计：（链路）复用"></a>1.1 <strong>基本设计：（链路）复用</strong></h4><ul>
<li><strong>电话的同步复用</strong><ul>
<li>容量稳定，固定数据率和时延</li>
</ul>
</li>
<li><strong>数据的异步复用</strong><ul>
<li>时间⽆规律性，⼤小不定长，⽆法要求固定数据率和时延</li>
</ul>
</li>
</ul>
<blockquote>
<p>同步复用和异步复用是两种不同的数据通信方式。<br>同步复用是指在通信过程中，数据的传输是按照固定的时间间隔进行的。例如，在电话通信中，每个电话通话都会占用固定的时间槽，无论通话内容有多少，都会占用相同的时间。同步复用适用于需要固定数据率和时延的场景。<br>异步复用是指在通信过程中，数据的传输是根据需要进行的，没有固定的时间间隔。例如，在数据通信中，数据包的传输是根据数据的到达和网络的状况进行的，没有固定的时间间隔。异步复用适用于数据传输不规律、大小不定长的场景。</p>
<p>&#x3D;&#x3D;同步复用是按照<u>固定时间间隔</u>进行数据传输，适用于固定数据率和时延的场景；异步复用是<u>根据需要进行数据传输</u>，适用于数据传输不规律、大小不定长的场景。&#x3D;&#x3D;</p>
</blockquote>
<ul>
<li><p>Isochronous、Asynchronous和Synchronous是三种不同的通信模式。</p>
<ul>
<li>Isochronous（等时通信）是一种特定的通信模式，适用于数字通话等场景。它要求通信的数据率和时延是固定的，通信链路的容量需要满足这个要求。</li>
<li>Asynchronous（异步通信）是一种通信模式，适用于数据通信。它的特点是消息的大小和时间间隔是不确定的，无法要求固定的数据率和时延。</li>
<li>Synchronous（同步通信）是一种通信模式，适用于电话场景。它通过时间分割复用（TDM）来实现，可以同时传输多条电话通话链路，每条链路的容量是固定的。</li>
</ul>
</li>
</ul>
<h4 id="1-2-基本问题：时延"><a href="#1-2-基本问题：时延" class="headerlink" title="1.2 基本问题：时延"></a>1.2 基本问题：时延</h4><ul>
<li><p>复用 → 异步通信链路 →异步通信结构→转发→时延</p>
</li>
<li><p><strong>排队论：利用率与时延</strong>：在排队论中，利用率与时延之间存在一定的关系。利用率是指系统中正在被使用的时间与总时间的比例，而时延是指一个数据包从进入系统到离开系统所经历的总时间。一般来说，&#x3D;&#x3D;当利用率较低时，系统的时延较低；当利用率较高时，系统的时延较高&#x3D;&#x3D;。这是<u>因为当<strong>利用率较低</strong>时，系统中的<strong>排队缓冲区较少，数据包能够快速通过系统</strong>，从而减少了时延。而当<strong>利用率较高</strong>时，系统中的<strong>排队缓冲区较多</strong>，数据包需要等待较长时间才能被处理，从而增加了时延。</u>但需要注意的是，<u>这只是一般情况下的趋势，具体的关系还受到其他因素的影响。</u></p>
</li>
<li><p>应对的三个策略：</p>
<ul>
<li>Plan for the worst case（难以预期）→congestion</li>
<li>Plan for the usual case and fight back（不可⾏）→丢弃</li>
<li>Plan for the usual case and discard overflow →浪费，却是最好的</li>
</ul>
</li>
<li><p>理解：有时由于请求过多会导致排队，从而时延变高，若是长时间排队可能会导致服务器卡死，导致了网络拥塞，因此达到一定数目后会采用“丢弃请求”的方式，让客户端再次访问，来缓解网络拥塞，这是下面思想的引用</p>
</li>
</ul>
<h4 id="1-3基本思想：best-effort"><a href="#1-3基本思想：best-effort" class="headerlink" title="1.3基本思想：best-effort"></a>1.3基本思想：best-effort</h4><ul>
<li><p>复用→异步→时延→排队→丢弃→best effort</p>
</li>
<li><p>目标：为了在可靠性和成本之间进行权衡。</p>
</li>
<li><p>尽最大努力去传输和交付数据，但不能保证数据的可靠性。数据包可能会丢失、延迟、重复或乱序，但这些问题可以在其他层面进行处理和解决。</p>
</li>
<li><p>可以降低网络的复杂性和成本，同时提高网络的灵活性和可扩展性。</p>
</li>
<li><p><strong>结论：best-effort是⼯程权衡的结果</strong></p>
<blockquote>
<ol>
<li>共享 → 复用 → 包转发 → 时延</li>
<li>链路质量 → 时延不可控 → (⽹络)排队 → 资源浪费</li>
<li>不浪费 → 控制排队 → 丢弃 → 不保证 → 尽⼒⽽为</li>
</ol>
</blockquote>
<ul>
<li>怎样best-effort？进⼀步的⼯程权衡</li>
<li><u>best-effort带来的其他问题如何处理？<strong>交给其他层</strong></u></li>
</ul>
</li>
</ul>
<h3 id="2-设计思想：分层思想"><a href="#2-设计思想：分层思想" class="headerlink" title="2. 设计思想：分层思想"></a>2. 设计思想：分层思想</h3><h4 id="2-1-分层"><a href="#2-1-分层" class="headerlink" title="2.1.分层"></a>2.1.分层</h4><ul>
<li><p>分层思想</p>
</li>
<li><p>分层思想是指将网络设计分为多个层次，每个层次负责不同的功能和任务。每个层次提供自己的服务接口，并隐藏底层的细节和对等层的协议接口。</p>
</li>
</ul>
<h4 id="2-2-分层的细分"><a href="#2-2-分层的细分" class="headerlink" title="2.2. 分层的细分"></a>2.2. 分层的细分</h4><ul>
<li><p>网络设计中的分层思想可以进一步细分为以下层次：</p>
<ol>
<li><p><strong>端到端层（end-to-end</strong>）：提供应用所需接口并实现</p>
</li>
<li><p><strong>网络层（network）</strong>：经中间点转发到目的地</p>
</li>
<li><p><strong>链路层（link</strong>）：点对点</p>
<blockquote>
<p>应用层？可看做第4层(非⽹络)，或与end-to-end层合并看待</p>
</blockquote>
</li>
</ol>
<blockquote>
<p>链路层是网络设计中的第一层，它负责将数据包从一个节点传输到另一个节点。链路层的主要功能包括数据帧的传输、错误检测和纠错、流量控制和链路复用。它通过物理连接将数据包从一个节点传输到另一个节点，并确保数据的可靠传输。<br>网络层是网络设计中的第二层，它负责将数据包从源节点传输到目标节点。网络层的主要功能包括路由选择、网络包的创建和转发。它通过选择合适的路径将数据包从源节点传输到目标节点，并确保数据包在网络中的正确传输。<br>端到端层是网络设计中的第三层，它为应用程序提供一个接口，使其能够使用网络进行通信。端到端层的主要功能包括表示服务、传输服务和会话服务。它负责将应用程序的数据转换为网络可传输的格式，并提供传输服务，处理丢失、重复和乱序等问题。<br>总的来说，链路层负责节点之间的数据传输，网络层负责网络中的数据传输，而端到端层为应用程序提供了一个接口，使其能够使用网络进行通信。这三层相互配合，共同构建了一个完整的网络系统。</p>
</blockquote>
</li>
</ul>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230629085504271.png" alt="image-20230629085504271" style="zoom:80%;">

<ul>
<li><p><strong>模块化特性</strong></p>
<ol>
<li><p><strong>每⼀层不应检查处理载荷内数据（上层来的数据）</strong></p>
</li>
<li><p><strong>跨层操作破坏模块化特性</strong></p>
<p>- 思考：什么时候需要跨层？</p>
<blockquote>
<p>• payload（载荷）：上层来的，下层予以传递的内容</p>
<p>• header and&#x2F;or trailer：下层根据需要加上的内容</p>
<hr>
<p>分层架构是分层思想的一种实现方式，它将一个复杂的系统划分为多个层次，每个层次负责不同的功能和服务。每一层都向上一层提供自己的服务接口，并隐藏向下的服务接口和对等的协议接口。<br>在分层架构中，每个层次的模块都有三个接口：上、下和对等。上接口用于向上一层提供服务，下接口用于向下一层请求服务，对等接口用于与邻接层进行交互。通过隐藏底层接口，每个层次的模块可以使用自己的解释和接口来提供服务，实现了模块之间的分层交互。</p>
<p>分层架构的设计思想是将系统的复杂性分解为多个相对独立的层次，每个层次专注于自己的功能和服务。这样可以提高系统的可维护性和可扩展性，同时也方便了系统的升级和替换。此外<strong>，分层架构还可以提供更好的模块化特性，使得每个层次的模块只需关注自己的任务，不需要检查和处理上层的数据，从而实现了系统的解耦和灵活性。</strong><br>总之，分层架构是一种将复杂系统划分为多个层次的设计思想，通过隐藏底层接口和提供自己的服务接口，实现了模块之间的分层交互，提高了系统的可维护性和可扩展性。</p>
</blockquote>
</li>
</ol>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230629092006540.png" alt="image-20230629092006540"></p>
</li>
</ul>
<h2 id="lec10-分层设计"><a href="#lec10-分层设计" class="headerlink" title="lec10 分层设计"></a>lec10 分层设计</h2><h3 id="1-链路层策略⽅法"><a href="#1-链路层策略⽅法" class="headerlink" title="1. 链路层策略⽅法"></a>1. <strong>链路层策略⽅法</strong></h3><ul>
<li>链路层主要内容：物理传输、封装成帧（framing）、错误处理、链路复用、接⼝提供</li>
</ul>
<h4 id="1-1-物理传输"><a href="#1-1-物理传输" class="headerlink" title="1.1 物理传输"></a>1.1 物理传输</h4><ul>
<li>物理传输是指将<u>数据从一个节点传输到另一个节点的过程</u>。它涉及到<strong>将数据转换为电信号，并通过物理介质（如电缆、光纤等）进行传输</strong>。</li>
<li>目标：确保数据能够准确、可靠地从发送节点传输到接收节点。</li>
</ul>
<h4 id="1-2-封装成帧（framing）"><a href="#1-2-封装成帧（framing）" class="headerlink" title="1.2 封装成帧（framing）"></a>1.2 <strong>封装成帧（framing）</strong></h4><ul>
<li>封装成帧是链路层的一个重要功能<u>，它将从上层接收到的数据分割成适当的帧，并在每个帧的开头和结尾添加必要的控制信息。</u></li>
<li>目的：为了在接收节点能够正确地识别和处理每个帧，并确保数据的完整性和可靠性。</li>
</ul>
<blockquote>
<p>数据链路层中，<strong>信息以帧为单位传输。所谓的帧，是一段有限的0&#x2F;1序列</strong>。比如说，根据一定的0&#x2F;1组合识别出帧的起始和结束。在帧中，有收信地址和送信地址 )，还有能够探测错误的校验序列。当然，帧中最重要的最重要是所要传输的数据。这些数据往往符合更高层协议，供网络的上层使用。与数据相配套，帧中也有数据的类型(Type)信息。连接层协议不关心数据中到底包含什么。<u>帧就像是一个信封，把数据包裹起来。</u></p>
</blockquote>
<h4 id="1-3-错误处理"><a href="#1-3-错误处理" class="headerlink" title="1.3 错误处理"></a>1.3 错误处理</h4><ul>
<li>链路层的错误处理主要涉及到检测和纠正传输过程中可能出现的错误。为了实现这一目标，链路层使用检错码来检测错误，并采取相应的措施来纠正错误。</li>
<li>常见的<u>错误处理方法</u>包括<strong>纠错码、请求重发和丢弃</strong>。</li>
</ul>
<h4 id="1-4-链路复用"><a href="#1-4-链路复用" class="headerlink" title="1.4 链路复用"></a>1.4 链路复用</h4><ul>
<li>链路复用是指在共享链路的情况下，如何有效地利用链路资源以支持多个通信连接。链路层通过使用<strong>多路复用技术</strong>，将多个通信连接同时传输在同一条链路上，从而提高链路的利用率。</li>
<li>常见的<u>链路复用技术</u>包括<strong>时分复用</strong>和<strong>频分复用</strong>。</li>
</ul>
<h4 id="1-5-接⼝提供"><a href="#1-5-接⼝提供" class="headerlink" title="1.5 接⼝提供"></a>1.5 接⼝提供</h4><ul>
<li>链路层的接口提供是指链路层向上层提供的服务接口。链路层<strong>通过接口提供给上层的服务包括数据的发送和接收</strong>。</li>
<li>目标：<u>隐藏底层的细节</u>，使上层能够方便地使用链路层的功能，而不需要了解底层的实现细节。</li>
</ul>
<h3 id="2-网络层策略⽅法-——-决定数据在网络中的传输路径，数据路由（决定数据在网络的路径）"><a href="#2-网络层策略⽅法-——-决定数据在网络中的传输路径，数据路由（决定数据在网络的路径）" class="headerlink" title="2. 网络层策略⽅法 —— 决定数据在网络中的传输路径，数据路由（决定数据在网络的路径）"></a>2. <strong>网络层策略⽅法 —— 决定数据在网络中的传输路径，数据路由（决定数据在网络的路径）</strong></h3><ul>
<li>网络层的主要内容：寻址、路由、层级结构、错误管理和NAT（网络地址转换）。</li>
</ul>
<h4 id="2-1-寻址"><a href="#2-1-寻址" class="headerlink" title="2.1 寻址"></a>2.1 寻址</h4><ul>
<li><p>寻址：<strong>网络层通过网络地址来标识和定位网络中的设备和主机。</strong>它提供了一种机制，使得数据包可以被正确地发送到目标设备。</p>
</li>
<li><p>两个层对包的处理：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230629094019381.png" alt="image-20230629094019381" style="zoom:80%;"></p>
</li>
</ul>
<h4 id="2-2-路由"><a href="#2-2-路由" class="headerlink" title="2.2 路由"></a>2.2 <strong>路由</strong></h4><ul>
<li><p>路由：<strong>网络层负责<u>选择最佳的路径</u>将数据包从源设备发送到目标设备</strong>。它使用<u>路由算法</u>来计算出数据包应该经过的<u>路径</u>，并<u>在网络中的路由器上进行转发</u>。</p>
</li>
<li><p>自动路由算法</p>
<ul>
<li><p><strong>静态路由（static routing）</strong>：不考虑变化和故障</p>
</li>
<li><p><strong>自适应路由（adaptive routing）</strong>：考虑变化、故障</p>
<ul>
<li><p>路由器（router）&#x3D; 转发器+路由计算器</p>
</li>
<li><p>消息交互：路由协议（routing protocol）</p>
<blockquote>
<p>当网络中的链路发生故障或变化时，<u>自适应路由算法会重新计算最佳路径，并更新路由表</u>，以确保数据能够正确地传输到目的地。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>原理？：</p>
<blockquote>
<p>各个转发表须协调，否则可能形成回路</p>
</blockquote>
</li>
</ul>
</li>
<li><p><strong>路由协议实现</strong></p>
<ul>
<li><p>作为⽹络层协议，复用在链路层上</p>
</li>
<li><p>不同的路由器组，可以选择不同的路由协议</p>
<p>‣ 因特⽹上同时运⾏者多个路由协议</p>
<p>‣ 路由器的不同链路上可能使用不同的路由协议</p>
</li>
</ul>
</li>
</ul>
<h4 id="2-3-层级结构"><a href="#2-3-层级结构" class="headerlink" title="2.3 层级结构"></a>2.3 层级结构</h4><ul>
<li><p>问题：前述⽅法<u>不适用⼤规模⽹络</u> —— 提出层级结构</p>
</li>
<li><p>层级结构：网络层引入了层级结构的概念<strong>，将网络划分为不同的区域和子网</strong>。这种层级结构可以提高网络的可扩展性和管理性。</p>
<blockquote>
<p>划分：局域网，广域网？</p>
</blockquote>
</li>
<li><p>运行</p>
<ul>
<li><p>每个region⾄少需要1个能在两个范围路由的接⼊点</p>
</li>
<li><p>使用转发表时，需要提取region信息再路由</p>
<blockquote>
<p>权威机构分配region号，region分配station号</p>
<p>region在边界设置转发器</p>
<p>region中仍然可以分级</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h4 id="2-4-错误管理"><a href="#2-4-错误管理" class="headerlink" title="2.4 错误管理"></a>2.4 错误管理</h4><ul>
<li><p>错误管理：<u>网络层处理网络中可能发生的错误</u>，例如数据包丢失、损坏或延迟。</p>
</li>
<li><p>跨层：⽹络层产⽣了⼀个端到端的包</p>
</li>
<li><p>方法：</p>
<ul>
<li><p>报告：使用<strong>独立的报错协议、独立的数据包</strong></p>
<p>‣ 发送：错误信息附加出错包的头</p>
</li>
<li><p>接收：发送者增加任务 - 监听错误处理包</p>
</li>
</ul>
</li>
<li><p>常见错误：</p>
<ul>
<li><pre><code>路由器缓冲区满/快满了
</code></pre>
</li>
<li><pre><code>region identifier/station identifier 不存在
</code></pre>
</li>
<li><pre><code>end type identifier不能识别
</code></pre>
</li>
<li><pre><code>⼤小超长（MTU）、跳数超长（TTL到零）
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="2-5-NAT-网络地址转换）"><a href="#2-5-NAT-网络地址转换）" class="headerlink" title="2.5 NAT(网络地址转换）"></a>2.5 NAT(网络地址转换）</h4><ul>
<li>网络地址转换（NAT）：<u>网络层可以进行网络地址转换，将私有网络中的内部地址转换为公共网络中的外部地址</u>。这种转换可以帮助<strong>解决IP地址不足的问题，并提高网络的安全性</strong>。</li>
</ul>
<h3 id="3-端到端层策略⽅法"><a href="#3-端到端层策略⽅法" class="headerlink" title="3. 端到端层策略⽅法"></a>3. <strong>端到端层策略⽅法</strong></h3><ul>
<li><p>best-effort有多不可靠</p>
<ul>
<li><p>不保证：时间、顺序、正确性、目的地、成功</p>
</li>
<li><p>但应用需要：性能、可靠性、确定性→ 端到端层</p>
</li>
</ul>
</li>
</ul>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230629101459591.png" alt="image-20230629101459591" style="zoom:80%;">



<h2 id="lec11作为整体的网络系统"><a href="#lec11作为整体的网络系统" class="headerlink" title="lec11作为整体的网络系统"></a>lec11作为整体的网络系统</h2><h3 id="1-网络系统的整体事项：拥塞控制"><a href="#1-网络系统的整体事项：拥塞控制" class="headerlink" title="1.网络系统的整体事项：拥塞控制"></a>1.<strong>网络系统的整体事项：拥塞控制</strong></h3><ul>
<li><p>产生原因：拥塞是由于网络中的流量超过了网络的容量而产生的</p>
<blockquote>
<p>- 忙→排队→（利用率↑→排队↑）→存在过载（短）</p>
<p>- 长时间过载→非预期⾏为{<strong>丢弃</strong>、超时…}</p>
</blockquote>
</li>
</ul>
<h4 id="1-1控制拥塞"><a href="#1-1控制拥塞" class="headerlink" title="1.1控制拥塞"></a>1.1控制拥塞</h4><ul>
<li><p><strong>共同目标</strong>：恢复到 <strong>容量＞负载</strong>的状态</p>
</li>
<li><p>增加容量：通过增加网络的带宽或增加网络设备的处理能力来提高网络的容量，以减少拥塞的可能性。</p>
</li>
<li><p>减少负载：通过限制或减少网络中的负载，以确保网络的负载不超过网络的容量。这可以通过限制数据传输速率、使用流量控制机制或者使用拥塞控制算法来实现。</p>
</li>
<li><p>跨层合作：<u>不同网络层之间的协作可以帮助实现拥塞控制</u>。例如，在传输层和网络层之间进行协作，通过传输层的反馈信息来控制网络层的流量，以避免拥塞的发生。</p>
</li>
<li><p>增加容量、减少负载的实施：均需要与控制点(control point)联系</p>
<p>‣ 超市：找⼈来帮忙 或者 用排队时间吓⾛排队的⼈</p>
</li>
<li><p>减少负载的困难：</p>
<ol>
<li><p>反馈到控制点需要较长的时间，面临较多的变数</p>
</li>
<li><p>控制点必须有能⼒配合（传输层或应用）</p>
</li>
<li><p>控制点必须愿意配合</p>
</li>
</ol>
<p>• 综上，集中式的⽅案存在若⼲困难</p>
<p>• <strong>分布式⽅案</strong>有⼀些成功案例</p>
</li>
</ul>
<h4 id="1-2-⽹络资源管理"><a href="#1-2-⽹络资源管理" class="headerlink" title="1.2 ⽹络资源管理"></a>1.2 ⽹络资源管理</h4><ul>
<li>⽹络资源比处理器调度更复杂</li>
</ul>
<p>  - 原因</p>
<p>  ‣ 1**.资源远不⽌⼀个，⾏为不同导致死锁&#x2F;活锁**</p>
<p>  ‣ 2.传输层独立于转发⽹络的特性，容易引发congestion collapse</p>
<p>  ‣ 3.<strong>扩展容量的⼿段有限</strong>。容量往往受限于物理条件，提</p>
<p>  升空间有限。更换路径，则需要知道整个⽹络的情</p>
<p>  况。这类⽅法有不少的尝试，但是现实的更好策略还</p>
<p>  是减少需求</p>
<p>  ‣ 4.减少负载的⼿段也难以实施</p>
<h4 id="1-3-跨层合作：反馈"><a href="#1-3-跨层合作：反馈" class="headerlink" title="1.3 跨层合作：反馈"></a>1.3 跨层合作：反馈</h4><ul>
<li>反馈机制：为了解决共享问题，可以引入反馈机制来实时监测和调整资源的分配和利用。例如，<strong>通过丢弃一部分数据包或调整发送速率来控制拥塞。</strong></li>
</ul>
<h4 id="1-4-跨层合作：控制"><a href="#1-4-跨层合作：控制" class="headerlink" title="1.4 跨层合作：控制"></a>1.4 跨层合作：控制</h4><h4 id="1-5-其他⽅式"><a href="#1-5-其他⽅式" class="headerlink" title="1.5 其他⽅式"></a>1.5 其他⽅式</h4><ul>
<li><strong>为所有链路配备最⼤流量的1.25-2倍的容量</strong>，适用于⼤型⽹络的内部链路。Internet骨⼲⽹普遍采用</li>
</ul>
<h4 id="1-6-回顾时延"><a href="#1-6-回顾时延" class="headerlink" title="1.6 回顾时延"></a>1.6 回顾时延</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/image-20230629104357198.png" alt="image-20230629104357198"></p>
<h2 id="lec12-容错：从不可靠获得可靠性"><a href="#lec12-容错：从不可靠获得可靠性" class="headerlink" title="lec12 容错：从不可靠获得可靠性"></a>lec12 容错：从不可靠获得可靠性</h2><ul>
<li><p>翻译约定：Fault：故障，Error：错误，Failure：失效</p>
</li>
<li><p>讨论：</p>
<p>• 面向通用问题，容错技术的系统化应用</p>
<p>• 讨论技术和应用的能⼒和限制</p>
</li>
</ul>
<p>几个重要的</p>
<ul>
<li><p><strong>容错设计的过程</strong>包括以下步骤：</p>
<ol>
<li><strong>开发容错模型</strong>：识别潜在故障并估计每个故障的风险。</li>
<li><strong>使用<u>模块化</u>遏制高风险错误产生的危害</strong>。</li>
<li><strong>设计实现错误屏蔽机制</strong>，包括<u>时间冗余</u>和<u>空间冗余</u>。</li>
<li><strong>将机制更新到容错模型中</strong>。</li>
<li>对设计和模型进行<strong>反复迭代</strong>，<strong>直到错误率达到可接受水平</strong>。</li>
<li><strong>观察、取样、统计、分析容错系统的性能</strong>。</li>
<li><strong>总结、改进、提升、迭代容错设计</strong>。<br>这个过程是一个循环迭代的过程，通过不断的分析、设计和改进，最终达到可接受的容错性能。</li>
</ol>
</li>
<li><p><strong>在容错设计和应用时，需要考虑以下因素和限制</strong>：</p>
<ol>
<li>故障类型和故障发生率：需要对系统中可能发生的故障进行分类和估计其发生率，以便确定容错策略和机制。</li>
<li>容错模型和规程：需要开发容错模型，识别潜在故障，并设计检测和屏蔽机制来应对这些故障。</li>
<li>容错策略和原则：需要根据具体场景选择合适的容错策略，如多模块冗余、快速失败和配对比较等，并遵循容错设计的原则。</li>
<li>成本和收益：容错设计需要考虑成本和收益的平衡，根据应用场景和业务需求进行取舍。</li>
<li>错误检测和遏制：需要设计合适的算法和规程来检测和遏制错误，以保证系统的可靠性和可用性。</li>
<li>容错能力和限制：容错设计需要考虑系统的容错能力，即系统所能容忍的失效组件个数，以及容错机制的实现和复杂度。</li>
<li>历史教训和案例分析：可以从历史教训和实际案例中学习，了解容错设计的成功和失败经验，以指导实际应用。<br>需要注意的是，容错设计和应用是一个复杂的过程，需要综合考虑多个因素和限制，并进行迭代和优化。</li>
</ol>
</li>
<li><p><strong>系统和环境中可能出现的问题和威胁</strong>可以通过以下方式进行处理：</p>
<ol>
<li><strong>开发容错模型</strong>：对系统进行分析，将可能的错误事件分类为可检测和不可检测的错误，并将所有错误标记为未容忍错误。如果不可检测错误的发生率不可忽略，需要更改系统设计。</li>
<li><strong>实施检测规程</strong>：对于所有可检测错误，实现检测规程，将能够检测到该错误的模块标记为fail-fast。这样可以及时发现错误并采取相应的措施。</li>
<li><strong>设计屏蔽机制</strong>：对于所有可检测错误，尝试设计屏蔽机制，<u>如果可行，则将此错误标记为可屏蔽错误</u>。评估发生率、失效代价和屏蔽代价，并根据评估结果确定是否实施屏蔽。</li>
<li><strong>处理已知错误</strong>：对于已知的错误，可以采取相应的措施来处理，如修复错误、更新软件或硬件等。<br>总之，处理系统和环境中可能出现的问题和威胁需要根据具体情况进行分析和评估，并采取相应的容错措施来降低风险和提高系统的可靠性。</li>
</ol>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://mr-f-whj.github.io">Kaleidoscope</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://mr-f-whj.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/">https://mr-f-whj.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%A4%8D%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://mr-f-whj.github.io" target="_blank">Kaleidoscopeのblog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/">计算机系统工程</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%A4%8D%E4%B9%A0/" title="数据结构复习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数据结构复习</div></div></a></div><div class="next-post pull-right"><a href="/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6%E5%A4%8D%E4%B9%A0/" title="现代密码学复习"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">现代密码学复习</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Kaleidoscope</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Mr-f-whj"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Mr-f-whj" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1272046133@qq.com" target="_blank" title="QQEmail"><i class="fa-brands fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎各位朋友的到来~~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Lec-01-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">Lec 01 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">0.介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%8D%E7%BD%AE%E5%92%8C%E6%84%8F%E4%B9%89"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.位置和意义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%94%B6%E8%8E%B7"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.收获</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.3.</span> <span class="toc-text">3.系统</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%9C%E4%B8%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%B1%9E%E6%80%A7-x2F-%E6%8C%91%E6%88%98"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">作为系统的属性&#x2F;挑战</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A5%E7%B3%BB%E7%BB%9F%E8%A7%82%E7%9A%84%E8%A7%86%E8%A7%92%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">以系统观的视角学习</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%B3%BB%E7%BB%9F%E4%B8%8E%E5%A4%8D%E6%9D%82%E6%80%A7"><span class="toc-number">1.2.</span> <span class="toc-text">1.系统与复杂性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%85%B1%E6%80%A7%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.1.</span> <span class="toc-text">1..系统的共性问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 系统组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%A4%8D%E6%9D%82%E6%80%A7"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.复杂性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BB%80%E4%B9%88%E5%AF%BC%E8%87%B4%E4%BA%86%E5%A4%8D%E6%9D%82%E6%80%A7%EF%BC%9F"><span class="toc-number">1.2.4.</span> <span class="toc-text">4.什么导致了复杂性？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BA%94%E5%AF%B9%E5%A4%8D%E6%9D%82%E6%80%A7"><span class="toc-number">1.3.</span> <span class="toc-text">2. 应对复杂性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%A8%A1%E5%9D%97%E5%8C%96-%E5%88%86%E6%88%90%E5%87%A0%E4%B8%AA%E5%B0%8F%E9%83%A8%E5%88%86-%E2%80%94%E2%80%94%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.模块化(分成几个小部分)——分而治之</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%8A%BD%E8%B1%A1%E2%80%94%E2%80%94%E9%9A%90%E8%97%8F%E7%BB%86%E8%8A%82%EF%BC%88%EF%BC%9F%E7%AE%80%E5%8C%96%E5%85%B6%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B%EF%BC%8C%E7%94%A8%E5%90%8D%E7%A7%B0%E7%AD%89%E6%A6%82%E6%8B%AC%E5%AE%83%E5%8A%9F%E8%83%BD%EF%BC%9F%EF%BC%89"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.抽象——隐藏细节（？简化其实现过程，用名称等概括它功能？）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%86%E5%B1%82"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.分层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B1%82%E7%BA%A7%EF%BC%88%E7%B1%BB%E4%BC%BC%E6%A0%91-x2F-%E6%A3%AE%E6%9E%97%EF%BC%89"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.层级（类似树&#x2F;森林）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%91%BD%E5%90%8D"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.命名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%B9%E6%AE%8A%E6%80%A7"><span class="toc-number">1.4.</span> <span class="toc-text">3.计算机系统的特殊性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%B9%E6%AE%8A%E6%80%A7"><span class="toc-number">1.4.1.</span> <span class="toc-text">计算机系统的特殊性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A6%82%E4%BD%95%E5%BA%94%E5%AF%B9"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.如何应对</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lec02-%E6%8A%BD%E8%B1%A1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.</span> <span class="toc-text">Lec02 抽象计算机系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%8A%BD%E8%B1%A1"><span class="toc-number">2.1.</span> <span class="toc-text">1、三个基本抽象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">2.1.1.</span> <span class="toc-text">1、存储器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="toc-number">2.1.2.</span> <span class="toc-text">2、解释器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E9%80%9A%E4%BF%A1%E9%93%BE%E8%B7%AF"><span class="toc-number">2.1.3.</span> <span class="toc-text">3、通信链路</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%91%BD%E5%90%8D-%EF%BC%9F%E5%90%8D%E7%A7%B0%E5%B0%B1%E5%83%8F%E5%8F%98%E9%87%8F%E5%90%8D%EF%BC%8C%E9%80%9A%E8%BF%87%E5%90%8D%E7%A7%B0%E5%8F%96%E5%BC%95%E7%94%A8%E8%A2%AB%E5%91%BD%E5%90%8D%E7%9A%84%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4-x2F-%E6%95%B0%E6%8D%AE-%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-number">2.2.</span> <span class="toc-text">2、命名(？名称就像变量名，通过名称取引用被命名的内存空间&#x2F;数据)！！！！</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%91%BD%E5%90%8D%E6%A8%A1%E5%9E%8B%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-number">2.2.1.</span> <span class="toc-text">1. 命名模型！！！！！</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%8A%E4%B8%8B%E6%96%87%E5%BC%95%E7%94%A8%EF%BC%88%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%89"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.  上下文引用（！！！）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E2%80%93"><span class="toc-number">2.2.3.</span> <span class="toc-text">3. –</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E8%B7%AF%E5%BE%84%E5%90%8D"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">3.1 路径名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-%E5%91%BD%E5%90%8D%E7%BD%91%E7%BB%9C-%E5%83%8F%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%8F%AF%E4%BB%A5%E4%BB%8E%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84%E8%AE%BF%E9%97%AE%EF%BC%9F%E6%9C%89%E5%89%AF%E6%9C%AC%EF%BC%9F"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">3.2 命名网络(像一个文件可以从不同路径访问？有副本？)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%A4%9A%E9%87%8D%E6%9F%A5%E6%89%BE%EF%BC%9A%E9%80%8F%E8%BF%87%E5%88%86%E5%B1%82%E4%B8%8A%E4%B8%8B%E2%BD%82%E7%9A%84%E6%90%9C%E7%B4%A2"><span class="toc-number">2.2.4.</span> <span class="toc-text">4、多重查找：透过分层上下⽂的搜索</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E5%90%8D%E7%A7%B0%E6%AF%94%E8%BE%83"><span class="toc-number">2.2.5.</span> <span class="toc-text">5、名称比较!????</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%90%8D%E7%A7%B0%E5%8F%91%E7%8E%B0"><span class="toc-number">2.2.6.</span> <span class="toc-text">6、名称发现</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lec03-%E5%91%BD%E5%90%8D"><span class="toc-number">3.</span> <span class="toc-text">Lec03 命名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%AE%BE%E8%AE%A1%E9%9C%80%E8%A6%81%E8%80%83%E8%99%91%E7%9A%84%E5%9B%A0%E7%B4%A0"><span class="toc-number">3.1.</span> <span class="toc-text">1、设计需要考虑的因素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E8%A7%A3%E5%86%B3%E5%90%8D%E7%A7%B0%E5%86%B2%E7%AA%81"><span class="toc-number">3.1.1.</span> <span class="toc-text">1、解决名称冲突</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%85%83%E6%95%B0%E6%8D%AE"><span class="toc-number">3.1.2.</span> <span class="toc-text">2、元数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%9C%B0%E5%9D%80"><span class="toc-number">3.1.3.</span> <span class="toc-text">3、地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%94%AF%E4%B8%80%E5%90%8D%E7%A7%B0"><span class="toc-number">3.1.4.</span> <span class="toc-text">4、唯一名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E7%94%A8%E6%88%B7%E5%8F%8B%E5%A5%BD%E6%80%A7"><span class="toc-number">3.1.5.</span> <span class="toc-text">5、用户友好性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.1.6.</span> <span class="toc-text">6、生命周期</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%AE%9E%E4%BE%8B%EF%BC%88URL-%E7%9C%8B%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">2、实例（URL  看）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lec04-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">4.</span> <span class="toc-text">Lec04 模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%BC%95%E6%96%87"><span class="toc-number">4.1.</span> <span class="toc-text">0.引文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-C-x2F-S%E6%9E%B6%E6%9E%84"><span class="toc-number">4.2.</span> <span class="toc-text">1.C&#x2F;S架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-C-x2F-S%E6%9E%B6%E6%9E%84%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.2.1.</span> <span class="toc-text">1.C&#x2F;S架构的介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-service-x2F-client%E7%9A%84%E6%90%AD%E9%85%8D"><span class="toc-number">4.2.2.</span> <span class="toc-text">2.service&#x2F;client的搭配 ?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%8F%AF%E4%BF%A1%E4%B8%AD%E4%BB%8B"><span class="toc-number">4.2.3.</span> <span class="toc-text">3.可信中介</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-C-x2F-S%E9%80%9A%E4%BF%A1"><span class="toc-number">4.3.</span> <span class="toc-text">2.C&#x2F;S通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%A8%8B%E5%BC%8F%E5%8C%96%E7%9A%84C-x2F-S%E9%80%9A%E4%BF%A1%EF%BC%9ARPC-%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8"><span class="toc-number">4.3.1.</span> <span class="toc-text">1.程式化的C&#x2F;S通信：RPC(远程过程调用)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-RPC%E4%B8%8E%E6%9C%AC%E5%9C%B0%E8%B0%83%E7%94%A8%E8%AF%AD%E4%B9%89%E4%B8%8D%E5%90%8C"><span class="toc-number">4.3.2.</span> <span class="toc-text">2.RPC与本地调用语义不同</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%8D%E5%9C%A8%E7%BA%BF%EF%BC%9A%E7%94%A8%E4%B8%AD%E4%BB%8B%E8%BF%9B%E2%BE%8F%E9%80%9A%E4%BF%A1"><span class="toc-number">4.3.3.</span> <span class="toc-text">3.不在线：用中介进⾏通信</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-C-x2F-S%E6%A1%88%E4%BE%8B-NFS"><span class="toc-number">4.4.</span> <span class="toc-text">3.C&#x2F;S案例(NFS)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lec050607-%E8%99%9A%E6%8B%9F%E5%8C%96"><span class="toc-number">5.</span> <span class="toc-text">Lec050607 虚拟化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%99%9A%E6%8B%9F%E5%8C%96"><span class="toc-number">5.1.</span> <span class="toc-text">1.虚拟化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%99%9A%E6%8B%9F%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8A%BD%E8%B1%A1%EF%BC%88%E7%BA%BF%E7%A8%8B-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98-x3D-%E8%99%9A%E6%8B%9F%E8%AE%A1%E7%AE%97%E6%9C%BA-%E2%88%9A%EF%BC%89"><span class="toc-number">5.1.1.</span> <span class="toc-text">1.虚拟计算机抽象（线程+虚拟内存 &#x3D; 虚拟计算机 √）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1%E8%99%9A%E6%8B%9F%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">5.1.1.1.</span> <span class="toc-text">1.1虚拟处理器</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-1-1-%E7%BA%BF%E7%A8%8B"><span class="toc-number">5.1.1.1.1.</span> <span class="toc-text">1.1.1 线程</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98"><span class="toc-number">5.1.1.2.</span> <span class="toc-text">1.2 虚拟内存</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-%E7%BA%BF%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%9A%E6%9C%89%E7%95%8C%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%88%E5%9C%A8%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%EF%BC%89"><span class="toc-number">5.1.1.3.</span> <span class="toc-text">1.3 线程间通信：有界缓冲区（在共享内存）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.1.1.4.</span> <span class="toc-text">1.4 操作系统接口</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-4-1-%E5%9C%A8%E7%A1%AC-%E8%BD%AF%E6%8E%A5%E5%8F%A3%E5%B1%82%E4%B8%8A%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%AE%9E%E6%96%BD%E5%93%AA%E4%BA%9B%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%EF%BC%9A"><span class="toc-number">5.1.1.4.1.</span> <span class="toc-text">1.4.1 在硬-软接口层上，可以实施哪些虚拟化技术：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-4-2-%E9%80%90%E6%AD%A5%E5%AE%9E%E7%8E%B0%E8%99%9A%E6%8B%9F%E5%8C%96%E8%BF%87%E7%A8%8B"><span class="toc-number">5.1.1.4.2.</span> <span class="toc-text">1.4.2 逐步实现虚拟化过程</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%99%9A%E6%8B%9F%EF%BC%88%E9%80%9A%E4%BF%A1%EF%BC%89%E9%93%BE%E8%B7%AF"><span class="toc-number">5.2.</span> <span class="toc-text">2. 虚拟（通信）链路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-SEND-amp-RECEIVE-%E6%8E%A5%E2%BC%9D"><span class="toc-number">5.2.1.</span> <span class="toc-text">1.SEND &amp; RECEIVE 接⼝</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%BA%8F%E5%88%97%E6%B6%88%E6%81%AF%E5%8D%8F%E8%B0%83"><span class="toc-number">5.2.2.</span> <span class="toc-text">2.序列消息协调</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Race-condition%EF%BC%88%E7%AB%9E%E6%80%81%E6%9D%A1%E4%BB%B6%EF%BC%89"><span class="toc-number">5.2.3.</span> <span class="toc-text">3. Race condition（竞态条件）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%94%81%EF%BC%88lock%EF%BC%89"><span class="toc-number">5.2.4.</span> <span class="toc-text">4. 锁（lock）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%AD%BB%E9%94%81"><span class="toc-number">5.2.5.</span> <span class="toc-text">5. 死锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%AE%9E%E7%8E%B0%E9%94%81%E5%8E%9F%E8%AF%AD%E2%80%93%E7%B4%AF%E4%BA%86"><span class="toc-number">5.2.6.</span> <span class="toc-text">6. 实现锁原语–累了</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%80%9F%E5%8A%A9One-writer-principle"><span class="toc-number">5.2.7.</span> <span class="toc-text">7. 借助One-writer principle</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">5.3.</span> <span class="toc-text">3.内存模块化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lec08-%E6%80%A7%E8%83%BD"><span class="toc-number">6.</span> <span class="toc-text">Lec08 性能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%80%A7%E8%83%BD%E8%AE%BE%E8%AE%A1"><span class="toc-number">6.1.</span> <span class="toc-text">1. 性能设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">6.1.1.</span> <span class="toc-text">1.1 性能指标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2%E6%80%A7%E8%83%BD%E8%AE%BE%E8%AE%A1%E6%80%BB%E4%BD%93%E6%96%B9%E6%B3%95"><span class="toc-number">6.1.2.</span> <span class="toc-text">1.2性能设计总体方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95"><span class="toc-number">6.1.3.</span> <span class="toc-text">1.3 优化方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-1-%E6%97%B6%E5%BB%B6%EF%BC%9A%E5%9F%BA%E4%BA%8E%E2%BC%AF%E4%BD%9C%E8%B4%9F%E8%BD%BD%EF%BC%88%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E5%9C%A8%E7%89%B9%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5%E5%86%85%E6%89%80%E5%A4%84%E7%90%86%E7%9A%84%E4%BB%BB%E5%8A%A1%E6%88%96%E5%B7%A5%E4%BD%9C%E9%87%8F%EF%BC%89"><span class="toc-number">6.1.3.1.</span> <span class="toc-text">1.3.1 时延：基于⼯作负载（计算机系统在特定时间段内所处理的任务或工作量）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-2%E6%97%B6%E5%BB%B6%EF%BC%9A%E5%9F%BA%E4%BA%8E%E5%B9%B6%E5%8F%91"><span class="toc-number">6.1.3.2.</span> <span class="toc-text">1.3.2时延：基于并发</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-3%E6%8F%90%E5%8D%87%E5%90%9E%E5%90%90%E7%8E%87%EF%BC%9A%E5%A4%9A%E7%BA%A7%E6%B5%81%E2%BD%94%E7%BA%BF"><span class="toc-number">6.1.3.3.</span> <span class="toc-text">1.3.3提升吞吐率：多级流⽔线</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E6%8E%92%E9%98%9F%E9%97%AE%E9%A2%98"><span class="toc-number">6.1.4.</span> <span class="toc-text">1.4 排队问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E5%BA%94%E5%AF%B9%E7%93%B6%E9%A2%88%E7%9A%84%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95%EF%BC%88%E5%A6%82%E6%9E%9C%E5%89%8D%E8%BF%B0%E7%9A%84%E5%B9%B3%E8%A1%A1%E3%80%81%E5%B9%B6%E5%8F%91%E7%AD%89%E2%BD%85%E6%B3%95%EF%BC%8C%E9%83%BD%E2%BD%86%E6%B3%95%E6%B6%88%E9%99%A4%E7%93%B6%E9%A2%88%EF%BC%89"><span class="toc-number">6.1.5.</span> <span class="toc-text">1.5 应对瓶颈的其他方法（如果前述的平衡、并发等⽅法，都⽆法消除瓶颈）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-I-x2F-O%E5%BA%94%E7%94%A8%E6%A0%B7%E4%BE%8B"><span class="toc-number">6.2.</span> <span class="toc-text">2. I&#x2F;O应用样例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%A4%9A%E7%BA%A7%E5%AD%98%E5%82%A8"><span class="toc-number">6.3.</span> <span class="toc-text">3.多级存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%B0%83%E5%BA%A6%EF%BC%88%E7%9C%8B%E4%B8%8B%EF%BC%89"><span class="toc-number">6.4.</span> <span class="toc-text">4.调度（看下）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lec09-%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3"><span class="toc-number">7.</span> <span class="toc-text">lec09 网络设计思想</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%88%E7%BD%91%E7%BB%9C%E8%AE%BE%E8%AE%A1%E7%BB%86%E8%8A%82%EF%BC%89"><span class="toc-number">7.1.</span> <span class="toc-text">1.网络是什么（网络设计细节）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-0-%E8%AE%BE%E8%AE%A1%E2%BD%B9%E7%BB%9C%E7%9A%84%E8%80%83%E8%99%91%E5%9B%A0%E7%B4%A0"><span class="toc-number">7.1.1.</span> <span class="toc-text">1.0.设计⽹络的考虑因素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%9F%BA%E6%9C%AC%E8%AE%BE%E8%AE%A1%EF%BC%9A%EF%BC%88%E9%93%BE%E8%B7%AF%EF%BC%89%E5%A4%8D%E7%94%A8"><span class="toc-number">7.1.2.</span> <span class="toc-text">1.1 基本设计：（链路）复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98%EF%BC%9A%E6%97%B6%E5%BB%B6"><span class="toc-number">7.1.3.</span> <span class="toc-text">1.2 基本问题：时延</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3%EF%BC%9Abest-effort"><span class="toc-number">7.1.4.</span> <span class="toc-text">1.3基本思想：best-effort</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3%EF%BC%9A%E5%88%86%E5%B1%82%E6%80%9D%E6%83%B3"><span class="toc-number">7.2.</span> <span class="toc-text">2. 设计思想：分层思想</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%88%86%E5%B1%82"><span class="toc-number">7.2.1.</span> <span class="toc-text">2.1.分层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%88%86%E5%B1%82%E7%9A%84%E7%BB%86%E5%88%86"><span class="toc-number">7.2.2.</span> <span class="toc-text">2.2. 分层的细分</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lec10-%E5%88%86%E5%B1%82%E8%AE%BE%E8%AE%A1"><span class="toc-number">8.</span> <span class="toc-text">lec10 分层设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%93%BE%E8%B7%AF%E5%B1%82%E7%AD%96%E7%95%A5%E2%BD%85%E6%B3%95"><span class="toc-number">8.1.</span> <span class="toc-text">1. 链路层策略⽅法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E7%89%A9%E7%90%86%E4%BC%A0%E8%BE%93"><span class="toc-number">8.1.1.</span> <span class="toc-text">1.1 物理传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7%EF%BC%88framing%EF%BC%89"><span class="toc-number">8.1.2.</span> <span class="toc-text">1.2 封装成帧（framing）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">8.1.3.</span> <span class="toc-text">1.3 错误处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E9%93%BE%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="toc-number">8.1.4.</span> <span class="toc-text">1.4 链路复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E6%8E%A5%E2%BC%9D%E6%8F%90%E4%BE%9B"><span class="toc-number">8.1.5.</span> <span class="toc-text">1.5 接⼝提供</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BD%91%E7%BB%9C%E5%B1%82%E7%AD%96%E7%95%A5%E2%BD%85%E6%B3%95-%E2%80%94%E2%80%94-%E5%86%B3%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%9C%A8%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E4%BC%A0%E8%BE%93%E8%B7%AF%E5%BE%84%EF%BC%8C%E6%95%B0%E6%8D%AE%E8%B7%AF%E7%94%B1%EF%BC%88%E5%86%B3%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%9C%A8%E7%BD%91%E7%BB%9C%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%89"><span class="toc-number">8.2.</span> <span class="toc-text">2. 网络层策略⽅法 —— 决定数据在网络中的传输路径，数据路由（决定数据在网络的路径）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%AF%BB%E5%9D%80"><span class="toc-number">8.2.1.</span> <span class="toc-text">2.1 寻址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E8%B7%AF%E7%94%B1"><span class="toc-number">8.2.2.</span> <span class="toc-text">2.2 路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84"><span class="toc-number">8.2.3.</span> <span class="toc-text">2.3 层级结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E9%94%99%E8%AF%AF%E7%AE%A1%E7%90%86"><span class="toc-number">8.2.4.</span> <span class="toc-text">2.4 错误管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-NAT-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%89"><span class="toc-number">8.2.5.</span> <span class="toc-text">2.5 NAT(网络地址转换）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%AB%AF%E5%88%B0%E7%AB%AF%E5%B1%82%E7%AD%96%E7%95%A5%E2%BD%85%E6%B3%95"><span class="toc-number">8.3.</span> <span class="toc-text">3. 端到端层策略⽅法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lec11%E4%BD%9C%E4%B8%BA%E6%95%B4%E4%BD%93%E7%9A%84%E7%BD%91%E7%BB%9C%E7%B3%BB%E7%BB%9F"><span class="toc-number">9.</span> <span class="toc-text">lec11作为整体的网络系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%95%B4%E4%BD%93%E4%BA%8B%E9%A1%B9%EF%BC%9A%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">9.1.</span> <span class="toc-text">1.网络系统的整体事项：拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1%E6%8E%A7%E5%88%B6%E6%8B%A5%E5%A1%9E"><span class="toc-number">9.1.1.</span> <span class="toc-text">1.1控制拥塞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E2%BD%B9%E7%BB%9C%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86"><span class="toc-number">9.1.2.</span> <span class="toc-text">1.2 ⽹络资源管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E8%B7%A8%E5%B1%82%E5%90%88%E4%BD%9C%EF%BC%9A%E5%8F%8D%E9%A6%88"><span class="toc-number">9.1.3.</span> <span class="toc-text">1.3 跨层合作：反馈</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E8%B7%A8%E5%B1%82%E5%90%88%E4%BD%9C%EF%BC%9A%E6%8E%A7%E5%88%B6"><span class="toc-number">9.1.4.</span> <span class="toc-text">1.4 跨层合作：控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E5%85%B6%E4%BB%96%E2%BD%85%E5%BC%8F"><span class="toc-number">9.1.5.</span> <span class="toc-text">1.5 其他⽅式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-%E5%9B%9E%E9%A1%BE%E6%97%B6%E5%BB%B6"><span class="toc-number">9.1.6.</span> <span class="toc-text">1.6 回顾时延</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lec12-%E5%AE%B9%E9%94%99%EF%BC%9A%E4%BB%8E%E4%B8%8D%E5%8F%AF%E9%9D%A0%E8%8E%B7%E5%BE%97%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc-number">10.</span> <span class="toc-text">lec12 容错：从不可靠获得可靠性</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/OUC%20sprout%20week3/" title="OUC Sprout第三周">OUC Sprout第三周</a><time datetime="2025-08-17T08:23:30.000Z" title="发表于 2025-08-17 16:23:30">2025-08-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/docker/%E5%9C%A8linux%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BAnavidrome%E9%9F%B3%E4%B9%90%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="无题">无题</a><time datetime="2025-08-02T02:20:30.000Z" title="发表于 2025-08-02 10:20:30">2025-08-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/OUC%20sprout%20week2/" title="OUC Sprout第二周">OUC Sprout第二周</a><time datetime="2025-07-27T03:23:30.000Z" title="发表于 2025-07-27 11:23:30">2025-07-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%EF%BC%9A%E7%AE%97%E6%B3%95%E5%88%B0%E5%AE%9E%E6%88%98/" title="深度学习：算法到实战学习记录">深度学习：算法到实战学习记录</a><time datetime="2025-07-12T03:23:30.000Z" title="发表于 2025-07-12 11:23:30">2025-07-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%E6%96%B9%E9%9D%A2%E4%BA%86%E8%A7%A3/" title="深度学习记录">深度学习记录</a><time datetime="2025-01-05T08:53:30.000Z" title="发表于 2025-01-05 16:53:30">2025-01-05</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/bg.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Kaleidoscope</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="压,力,麻,斯,捏" data-fontsize="15px" data-random="false" async="async"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: true,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>